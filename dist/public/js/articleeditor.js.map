{"version":3,"sources":["../../../public/js/articleeditor.js"],"names":["VM","Vue","delimiters","el","data","title","contents","markdownText","previewHtml","tags","editors","marked","wangedit","editorsWidth","editorsHeight","wangEditor","markdownEditor","imgSrc","accountSymbol","accountBox","checked","tagLists","uid","token","docName","userName","docList","articleLsts","docInputBox","doc_id","docActive","nowArticleId","showLoadBut","docMenuShow","articleMenuShow","articleMenuDocShow","articleTitleIndex","methods","init","getUser","initMarked","w","h","_this","$","editormd","width","height","emoji","syncScrolling","path","toolbarIcons","saveHTMLToTextarea","watch","toolbar","tex","flowChart","sequenceDiagram","dialogLockScreen","dialogShowMask","dialogDraggable","dialogMaskOpacity","dialogMaskBgColor","onchange","console","log","initEditor","E","window","customConfig","menus","create","getToken","$http","get","then","res","err","body","getTags","winH","document","clientHeight","documentElement","_id","name","getDocLists","length","active","getArticleLists","markDownText","txt","html","getArticle","setMarkdown","uploadfile","e","file","target","files","Reader","FileReader","addEventListener","result","readAsDataURL","showAccountBox","createDocument","focus","confirmDocSubmitForm","post","cleanDocConfirm","documentSetting","id","index","$refs","menu","style","display","editDocument","showDocumentBox","showDocumentInput","psotDocumentNameEdit","value","innerHTML","documentInputBlur","deleteDocument","createArticle","doc_name","user_name","saveArticle","getMarkdown","getHTML","articleSetting","articleMenu","selectDocumentButs","doc","i","forEach","set","item","selectArticleBut","article","releaseArticle","moveArticle","articlMenuDocumentBlock","top","parseInt","deleteArticle","changeArticleTitle","articleTitle"],"mappings":"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","file":"articleeditor.js","sourcesContent":["const VM = new Vue({\r\n    delimiters: ['${', '}'],\r\n    el:'#article-editor-app',\r\n    data:{\r\n        title:'无标题文档',\r\n        contents:'### 文章详情',\r\n        markdownText:'### 文章详情',\r\n        previewHtml:'',\r\n        tags:null,\r\n        editors:2,\r\n        marked:null,\r\n        wangedit:null,\r\n        editorsWidth:\"100%\",\r\n        editorsHeight:\"100%\",\r\n        wangEditor:'block',\r\n        markdownEditor:'none',\r\n        imgSrc:'',\r\n        accountSymbol:'&#xe68f;',\r\n        accountBox:'none',\r\n        checked:false,\r\n        tagLists:[],\r\n        uid:'',\r\n        token:'',\r\n        docName:'输入文集名称',\r\n        userName:'',\r\n        docList:[],\r\n        articleLsts:[],\r\n        docInputBox:'none',\r\n        doc_id:'',\r\n        docActive:'document-active',\r\n        nowArticleId:'',\r\n        showLoadBut:'none',\r\n        docMenuShow:'none',\r\n        articleMenuShow:'none',\r\n        articleMenuDocShow:'none',\r\n        articleTitleIndex:0\r\n    },\r\n    methods:{\r\n        init:function(){\r\n            if(token != '' && uid != ''){\r\n                this.token = token;\r\n                this.uid = uid;\r\n                this.getUser();\r\n            }\r\n        },\r\n        initMarked:function(w,h){\r\n            let _this = this;\r\n            $(function() {\r\n                _this.editormd = editormd(\"editormd\", {\r\n                    width: w,\r\n                    height: h,\r\n                    emoji: true,\r\n                    syncScrolling: \"single\",\r\n                    path: \"/public/js/marked/lib/\", // Autoload modules mode, codemirror, marked... dependents libs path\r\n                    toolbarIcons : function() {\r\n                        // return editormd.toolbarModes['full']; // full, simple, mini\r\n                        // Using \"||\" set icons align right.\r\n                        return [\"undo\", \"redo\", \"|\", \"bold\",\"del\",\"italic\",\"quote\",\"ucwords\",\"uppercase\",\"lowercase\",\"|\",\"list-ul\",\"list-ol\", \"hr\", \"|\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\", \"|\",\"link\",\"image\", \"code\",\"preformatted-text\",\"code-block\",\"emoji\",\"table\",\"html-entities\",\"||\", \"watch\", \"fullscreen\", \"preview\",\"clear\",\"help\"]\r\n                    },\r\n                    // theme: \"dark\",\r\n                    // previewTheme: \"dark\",\r\n                    // editorTheme: \"pastel-on-dark\",\r\n                    // //markdown: md,\r\n                    // codeFold: true,\r\n                    saveHTMLToTextarea: true, //注意3：这个配置，方便post提交表单\r\n                    // /**设置主题颜色*/\r\n                    // // editorTheme: \"pastel-on-dark\",\r\n                    // theme: \"gray\",\r\n                    // previewTheme: \"dark\",\r\n                    // // taskList: true,\r\n                    // searchReplace: true,\r\n                    watch: false, // 关闭实时预览\r\n                    // htmlDecode: \"style,script,iframe|on*\", // 开启 HTML 标签解析，为了安全性，默认不开启\r\n                    toolbar: true, //关闭工具栏\r\n                    // previewCodeHighlight: false, // 关闭预览 HTML 的代码块高亮，默认开启\r\n                    // tocm: true, // Using [TOCM]\r\n                    tex: false, // 开启科学公式TeX语言支持，默认关闭\r\n                    flowChart: true, //开启流程图支持，默认关闭\r\n                    sequenceDiagram: true, //开启时序/序列图支持，默认关闭,\r\n                    dialogLockScreen: false, //设置弹出层对话框不锁屏，全局通用，默认为true\r\n                    dialogShowMask: false, //设置弹出层对话框显示透明遮罩层，全局通用，默认为true\r\n                    dialogDraggable: false, //设置弹出层对话框不可拖动，全局通用，默认为true\r\n                    dialogMaskOpacity: 0.4, //设置透明遮罩层的透明度，全局通用，默认值为0.1\r\n                    dialogMaskBgColor: \"#000\", //设置透明遮罩层的背景颜色，全局通用，默认为#fff\r\n                    //\r\n                    // codeFold: true,\r\n                    //\r\n                    // imageUpload: true,\r\n                    // imageFormats: [\"jpg\", \"jpeg\", \"gif\", \"png\", \"bmp\", \"webp\"],\r\n                    // imageUploadURL: \"/smart-api/upload/editormdPic/\",\r\n                    // onload: function() {\r\n                    //     //console.log('onload', this);\r\n                    //     //this.fullscreen();\r\n                    //     //this.unwatch();\r\n                    //     //this.watch().fullscreen();\r\n                    //     //this.width(\"100%\");\r\n                    //     //this.height(480);\r\n                    //     //this.resize(\"100%\", 640);\r\n                    // },\r\n                    onchange:function(){\r\n                        console.log(this);\r\n                    }\r\n                });\r\n                // _this.editormd.config(\"toolbarAutoFixed\", false);\r\n            });\r\n        },\r\n        initEditor:function(w,h){\r\n            const E = window.wangEditor;\r\n            this.wangedit = new E('#exampleTextarea');\r\n            this.wangedit.customConfig.menus = [\r\n                'head',  // 标题\r\n                'bold',  // 粗体\r\n                'italic',  // 斜体\r\n                'underline',  // 下划线\r\n                'strikeThrough',  // 删除线\r\n                'foreColor',  // 文字颜色\r\n                'backColor',  // 背景颜色\r\n                'link',  // 插入链接\r\n                'list',  // 列表\r\n                'justify',  // 对齐方式\r\n                'quote',  // 引用\r\n                'emoticon',  // 表情\r\n                'image',  // 插入图片\r\n                'table',  // 表格\r\n                'video',  // 插入视频\r\n                'code',  // 插入代码\r\n                'undo',  // 撤销\r\n                'redo'  // 重复\r\n            ];\r\n            // editor.customConfig.onchange = function (html) {\r\n            //     // html 即变化之后的内容\r\n            //     this.contents = html;\r\n            //     // console.log(html)\r\n            // }\r\n            this.wangedit.create();\r\n\r\n        },\r\n        getToken:function(){\r\n            if(!this.token || this.token == ''){\r\n                this.$http.get('/api/gettoken').then((res)=>{\r\n                    if(!res) throw console.log(err);\r\n                    this.token = res.body.data.token;\r\n                })\r\n            }\r\n        },\r\n        getTags:function(){\r\n            this.$http.get('/api/tags').then(res=>{\r\n                this.tags = res.body.data;\r\n            });\r\n        },\r\n        getUser:function(){\r\n            let winH = document.body.clientHeight || document.documentElement.clientHeight;\r\n            this.editorsHeight = winH+'px';\r\n            this.$http.get('/api/getUsers?uid='+this.uid).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.uid = res.body.data._id;\r\n                this.userName = res.body.data.name;\r\n                this.editors = res.body.data.editors;\r\n                if(this.editors == 2){\r\n                    this.markdownEditor = 'block';\r\n                    this.wangEditor = 'none';\r\n                    this.initMarked(this.editorsWidth,this.editorsHeight);\r\n                }else{\r\n                    this.initEditor(this.editorsWidth,this.editorsHeight);\r\n                    this.markdownEditor = 'none';\r\n                    this.wangEditor = 'block';\r\n                }\r\n                this.getDocLists();\r\n            });\r\n        },\r\n        getDocLists:function(){\r\n            this.$http.get('/api/getDocLists?uid='+this.uid).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.docList = res.body.data;\r\n                if(this.docList.length > 0){\r\n                    this.docList[0].active = true;\r\n                    this.doc_id = res.body.data[0]._id;\r\n                    this.docName = res.body.data[0].name;\r\n                    this.getArticleLists();\r\n                }\r\n            });\r\n        },\r\n        getArticleLists:function(){\r\n            this.$http.get('/api/getArticleLists?doc_id='+this.doc_id).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.articleLsts = res.body.data;\r\n                if(this.articleLsts.length > 0){\r\n                    this.articleLsts[0].active = true;\r\n                    this.nowArticleId = res.body.data[0]._id;\r\n                    this.title = res.body.data[0].title;\r\n                    if(this.editors == 2){\r\n                        this.contents = res.body.data[0].markDownText;\r\n                    }else{\r\n                        this.contents = res.body.data[0].contents;\r\n                        this.wangedit.txt.html(this.contents);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        getArticle:function(){\r\n            this.$http.get('/api/getArticle?id='+this.nowArticleId).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.title = res.body.data.title;\r\n                this.nowArticleId = res.body.data._id;\r\n                if(this.editors == 2){\r\n                    this.contents = res.body.data.markDownText;\r\n                    this.editormd.setMarkdown(this.contents);\r\n                }else{\r\n                    this.contents = res.body.data.contents;\r\n                    this.wangedit.txt.html(this.contents);\r\n                }\r\n            });\r\n        },\r\n        uploadfile:function(e){\r\n            console.log(e);\r\n            let _this = this;\r\n            let file = e.target.files[0];\r\n            let Reader = new FileReader();\r\n            Reader.addEventListener('load', function(e){\r\n                console.log(e);\r\n                console.log(Reader);\r\n                _this.imgSrc = Reader.result;\r\n            },false);\r\n            Reader.readAsDataURL(file);\r\n        },\r\n        showAccountBox:function(){\r\n            if(this.accountBox == 'none'){\r\n                this.accountBox = 'block';\r\n                this.accountSymbol = '&#xe68d';\r\n            }else{\r\n                this.accountBox = 'none';\r\n                this.accountSymbol = '&#xe68f;'\r\n            }\r\n        },\r\n        createDocument:function(e){\r\n            this.docInputBox='block';\r\n        },\r\n        focus:function(e){\r\n            this.docName = '';\r\n        },\r\n        confirmDocSubmitForm:function(e){\r\n            this.$http.post('/api/newDocument',{\r\n                uid:this.uid,\r\n                name:this.docName\r\n            }).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.docInputBox='none';\r\n                this.getDocLists();\r\n            });\r\n        },\r\n        cleanDocConfirm:function(e){\r\n            this.docInputBox='none';\r\n        },\r\n        documentSetting:function(e,id,index){\r\n            if(this.docMenuShow == 'none'){\r\n                this.docMenuShow = 'block';\r\n            }else{\r\n                this.docMenuShow = 'none';\r\n            }\r\n            this.$refs.menu[index].style.display = this.docMenuShow;\r\n        },\r\n        editDocument:function(e,id,index){\r\n            if(this.docMenuShow == 'none'){\r\n                this.docMenuShow = 'block';\r\n            }else{\r\n                this.docMenuShow = 'none';\r\n            }\r\n            this.$refs.menu[index].style.display = this.docMenuShow;\r\n            this.$refs.showDocumentBox[index].style.display = 'none';\r\n            this.$refs.showDocumentInput[index].style.display = 'block';\r\n            this.$refs.showDocumentInput[index].focus();\r\n        },\r\n        psotDocumentNameEdit:function(e,id,index){\r\n            let value = this.$refs.showDocumentInput[index].value;\r\n            this.$refs.showDocumentBox[index].innerHTML = value;\r\n            this.$http.post('/api/updateDocumentName',{\r\n                uid:this.uid,\r\n                id:id,\r\n                token:this.token,\r\n                name:value\r\n            }).then(res=>{\r\n                // pass\r\n            });\r\n        },\r\n        documentInputBlur:function(e,id,index){\r\n            this.$refs.showDocumentBox[index].style.display = 'block';\r\n            this.$refs.showDocumentInput[index].style.display = 'none';\r\n            this.$refs.showDocumentBox[index].innerHTML = this.$refs.showDocumentInput[index].value;\r\n        },\r\n        deleteDocument:function(e,id,index){\r\n            this.$http.get('/api/deleteDoc?id='+id+'&uid='+this.uid+'&token='+this.token).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.docMenuShow = 'none';\r\n                this.$refs.menu[index].style.display = this.docMenuShow;\r\n                this.getDocLists();\r\n            });\r\n        },\r\n        createArticle:function(e){\r\n            this.showLoadBut = 'block';\r\n            this.$http.post('/api/newArticle',{\r\n                uid:this.uid,\r\n                doc_id:this.doc_id,\r\n                doc_name:this.docName,\r\n                user_name:this.userName,\r\n                token:this.token\r\n            }).then(res=>{\r\n                this.showLoadBut = 'none';\r\n                if(!res) throw console.log(res);\r\n                console.log(res);\r\n                this.nowArticleId = res.body.data.id;\r\n                this.getArticleLists();\r\n            });\r\n        },\r\n        saveArticle:function(e,id){\r\n\r\n            // markdownToHTML\r\n            if(this.editors == 2){\r\n                this.markdownText =this.editormd.getMarkdown();\r\n                this.contents = this.editormd.getHTML();\r\n            }else{\r\n                this.contents = this.wangedit.txt.html()\r\n            }\r\n\r\n            this.$http.post('/api/saveArticle',{\r\n                id:id,\r\n                title:this.title,\r\n                contents:this.contents,\r\n                markdownText:this.markdownText\r\n            }).then(res=>{\r\n                console.log(res);\r\n            });\r\n        },\r\n        articleSetting:function(e,id,index){\r\n            if(this.articleMenuShow == 'none'){\r\n                this.articleMenuShow = 'block';\r\n            }else{\r\n                this.articleMenuShow = 'none';\r\n            }\r\n            this.$refs.articleMenu[index].style.display = this.articleMenuShow;\r\n        },\r\n        selectDocumentButs:function(e,doc,i){\r\n            this.docList.forEach(item=>{\r\n                Vue.set(item,'active',false);\r\n            })\r\n            this.doc_id = doc._id;\r\n            this.docName = doc.name;\r\n            Vue.set(doc,'active',true);\r\n            this.getArticleLists();\r\n        },\r\n        selectArticleBut:function(e,article,index){\r\n            this.articleLsts.forEach(item=>{\r\n                Vue.set(item,'active',false);\r\n            })\r\n            this.nowArticleId = article._id;\r\n            Vue.set(article,'active',true);\r\n            this.title = article.title;\r\n            this.articleTitleIndex = index;\r\n            this.getArticle();\r\n        },\r\n        releaseArticle:function(e,id,index){\r\n            this.$http.get('/api/releaseArticle?id='+id+'&uid='+this.uid+'&token='+this.token).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.articleMenuShow = 'none';\r\n                this.$refs.articleMenu[index].style.display = this.articleMenuShow;\r\n                this.getArticleLists();\r\n            });\r\n        },\r\n        moveArticle:function(e,id,index){\r\n            if(this.articleMenuDocShow == 'none'){\r\n                this.articleMenuDocShow = 'block';\r\n            }else{\r\n                this.articleMenuDocShow = 'none';\r\n            }\r\n            this.$refs.articlMenuDocumentBlock.style.display = this.articleMenuDocShow;\r\n            this.$refs.articlMenuDocumentBlock.style.top = parseInt((68*(index+1))+72)+'px';\r\n        },\r\n        deleteArticle:function(e,id,index){\r\n            this.$http.get('/api/deleteArticle?id='+id+'&uid='+this.uid+'&token='+this.token).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.articleMenuShow = 'none';\r\n                this.$refs.articleMenu[index].style.display = this.articleMenuShow;\r\n                this.getArticleLists();\r\n            });\r\n        },\r\n        changeArticleTitle:function(e){\r\n            this.$http.post('/api/changeAticleTitle',{\r\n                uid:this.uid,\r\n                token:this.token,\r\n                id:this.nowArticleId,\r\n                title:this.title,\r\n            }).then(res=>{\r\n                console.log(res)\r\n            });\r\n            this.$refs.articleTitle[this.articleTitleIndex].innerHTML = this.title;\r\n        }\r\n    }\r\n});\r\nVM.init();"]}