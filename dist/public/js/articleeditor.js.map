{"version":3,"sources":["../../../public/js/articleeditor.js"],"names":["VM","Vue","delimiters","el","data","title","contents","markdownText","previewHtml","tags","editors","marked","wangedit","editorsWidth","editorsHeight","wangEditor","markdownEditor","imgSrc","accountSymbol","accountBox","checked","tagLists","uid","docName","userName","docList","articleLsts","docInputBox","doc_id","docActive","nowArticleId","showLoadBut","docMenuShow","articleMenuShow","articleMenuDocShow","articleTitleIndex","saveTip","methods","init","getUser","initMarked","w","h","_this","$","editormd","width","height","emoji","syncScrolling","path","toolbarIcons","saveHTMLToTextarea","watch","toolbar","tex","flowChart","sequenceDiagram","dialogLockScreen","dialogShowMask","dialogDraggable","dialogMaskOpacity","dialogMaskBgColor","codeFold","imageUpload","imageFormats","imageUploadURL","onload","onchange","initEditor","E","window","customConfig","menus","create","getTags","$http","get","then","res","body","winH","document","clientHeight","documentElement","console","log","_id","name","getDocLists","length","active","getArticleLists","markDownText","txt","html","getArticle","article","setMarkdown","uploadfile","e","file","target","files","Reader","FileReader","addEventListener","result","readAsDataURL","showAccountBox","createDocument","focus","confirmDocSubmitForm","post","cleanDocConfirm","documentSetting","id","index","$refs","menu","style","display","editDocument","showDocumentBox","showDocumentInput","psotDocumentNameEdit","value","innerHTML","documentInputBlur","deleteDocument","createArticle","doc_name","user_name","saveArticle","getMarkdown","getPreviewedHTML","showSaveTip","articleSetting","articleMenu","selectDocumentButs","doc","i","forEach","set","item","selectArticleBut","releaseArticle","moveArticle","articlMenuDocumentBlock","top","parseInt","deleteArticle","changeArticleTitle","articleTitle","setTimeout"],"mappings":"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","file":"articleeditor.js","sourcesContent":["const VM = new Vue({\r\n    delimiters: ['${', '}'],\r\n    el:'#article-editor-app',\r\n    data:{\r\n        title:'无标题文档',\r\n        contents:'### 文章详情',\r\n        markdownText:'### 文章详情',\r\n        previewHtml:'',\r\n        tags:null,\r\n        editors:2,\r\n        marked:null,\r\n        wangedit:null,\r\n        editorsWidth:\"100%\",\r\n        editorsHeight:\"100%\",\r\n        wangEditor:'block',\r\n        markdownEditor:'none',\r\n        imgSrc:'',\r\n        accountSymbol:'&#xe68f;',\r\n        accountBox:'none',\r\n        checked:false,\r\n        tagLists:[],\r\n        uid:'',\r\n        docName:'输入文集名称',\r\n        userName:'',\r\n        docList:[],\r\n        articleLsts:[],\r\n        docInputBox:'none',\r\n        doc_id:'',\r\n        docActive:'document-active',\r\n        nowArticleId:'',\r\n        showLoadBut:'none',\r\n        docMenuShow:'none',\r\n        articleMenuShow:'none',\r\n        articleMenuDocShow:'none',\r\n        articleTitleIndex:0,\r\n        saveTip:'none'\r\n    },\r\n    methods:{\r\n        init:function(){\r\n            if(uid != ''){\r\n                this.uid = uid;\r\n                this.getUser();\r\n            }\r\n        },\r\n        initMarked:function(w,h){\r\n            let _this = this;\r\n            $(function() {\r\n                _this.editormd = editormd(\"editormd\", {\r\n                    width: w,\r\n                    height: h,\r\n                    emoji: true,\r\n                    syncScrolling: \"single\",\r\n                    path: \"/public/js/marked/lib/\", // Autoload modules mode, codemirror, marked... dependents libs path\r\n                    toolbarIcons : function() {\r\n                        // return editormd.toolbarModes['full']; // full, simple, mini\r\n                        // Using \"||\" set icons align right.\r\n                        return [\"undo\", \"redo\", \"|\", \"bold\",\"del\",\"italic\",\"quote\",\"ucwords\",\"uppercase\",\"lowercase\",\"|\",\"list-ul\",\"list-ol\", \"hr\", \"|\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\", \"|\",\"link\",\"image\", \"code\",\"preformatted-text\",\"code-block\",\"emoji\",\"table\",\"html-entities\",\"||\", \"watch\", \"fullscreen\", \"preview\",\"clear\",\"help\"]\r\n                    },\r\n                    // theme: \"dark\",\r\n                    // previewTheme: \"dark\",\r\n                    // editorTheme: \"pastel-on-dark\",\r\n                    // //markdown: md,\r\n                    // codeFold: true,\r\n                    saveHTMLToTextarea: true, //注意3：这个配置，方便post提交表单\r\n                    // /**设置主题颜色*/\r\n                    // // editorTheme: \"pastel-on-dark\",\r\n                    // theme: \"gray\",\r\n                    // previewTheme: \"dark\",\r\n                    // // taskList: true,\r\n                    // searchReplace: true,\r\n                    watch: true, // 关闭实时预览\r\n                    // htmlDecode: \"style,script,iframe|on*\", // 开启 HTML 标签解析，为了安全性，默认不开启\r\n                    toolbar: true, //关闭工具栏\r\n                    // previewCodeHighlight: false, // 关闭预览 HTML 的代码块高亮，默认开启\r\n                    // tocm: true, // Using [TOCM]\r\n                    tex: false, // 开启科学公式TeX语言支持，默认关闭\r\n                    flowChart: true, //开启流程图支持，默认关闭\r\n                    sequenceDiagram: true, //开启时序/序列图支持，默认关闭,\r\n                    dialogLockScreen: false, //设置弹出层对话框不锁屏，全局通用，默认为true\r\n                    dialogShowMask: false, //设置弹出层对话框显示透明遮罩层，全局通用，默认为true\r\n                    dialogDraggable: false, //设置弹出层对话框不可拖动，全局通用，默认为true\r\n                    dialogMaskOpacity: 0.4, //设置透明遮罩层的透明度，全局通用，默认值为0.1\r\n                    dialogMaskBgColor: \"#000\", //设置透明遮罩层的背景颜色，全局通用，默认为#fff\r\n                    //\r\n                    codeFold: true,\r\n                    //\r\n                    imageUpload: true,\r\n                    imageFormats: [\"jpg\", \"jpeg\", \"gif\", \"png\", \"bmp\", \"webp\"],\r\n                    imageUploadURL: \"/api/uploader\",\r\n                    onload: function() {\r\n                        //this.fullscreen();\r\n                        //this.unwatch();\r\n                        //this.watch().fullscreen();\r\n                        //this.width(\"100%\");\r\n                        //this.height(480);\r\n                        //this.resize(\"100%\", 640);\r\n                    },\r\n                    onchange:function(){\r\n\r\n                    }\r\n                });\r\n                // _this.editormd.config(\"toolbarAutoFixed\", false);\r\n            });\r\n        },\r\n        initEditor:function(w,h){\r\n            const E = window.wangEditor;\r\n            this.wangedit = new E('#exampleTextarea');\r\n            this.wangedit.customConfig.menus = [\r\n                'head',  // 标题\r\n                'bold',  // 粗体\r\n                'italic',  // 斜体\r\n                'underline',  // 下划线\r\n                'strikeThrough',  // 删除线\r\n                'foreColor',  // 文字颜色\r\n                'backColor',  // 背景颜色\r\n                'link',  // 插入链接\r\n                'list',  // 列表\r\n                'justify',  // 对齐方式\r\n                'quote',  // 引用\r\n                'emoticon',  // 表情\r\n                'image',  // 插入图片\r\n                'table',  // 表格\r\n                'video',  // 插入视频\r\n                'code',  // 插入代码\r\n                'undo',  // 撤销\r\n                'redo'  // 重复\r\n            ];\r\n            // editor.customConfig.onchange = function (html) {\r\n            //     // html 即变化之后的内容\r\n            //     this.contents = html;\r\n            //     // console.log(html)\r\n            // }\r\n            this.wangedit.create();\r\n\r\n        },\r\n        getTags:function(){\r\n            this.$http.get('/api/tags').then(res=>{\r\n                this.tags = res.body.data;\r\n            });\r\n        },\r\n        getUser:function(){\r\n            let winH = document.body.clientHeight || document.documentElement.clientHeight;\r\n            this.editorsHeight = winH+'px';\r\n            this.$http.get('/api/getUsers?uid='+this.uid).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.uid = res.body.data._id;\r\n                this.userName = res.body.data.name;\r\n                this.editors = res.body.data.editors;\r\n                if(this.editors == 2){\r\n                    this.markdownEditor = 'block';\r\n                    this.wangEditor = 'none';\r\n                    this.initMarked(this.editorsWidth,this.editorsHeight);\r\n                }else{\r\n                    this.initEditor(this.editorsWidth,this.editorsHeight);\r\n                    this.markdownEditor = 'none';\r\n                    this.wangEditor = 'block';\r\n                }\r\n                this.getDocLists();\r\n            });\r\n        },\r\n        getDocLists:function(){\r\n            this.$http.get('/api/getDocLists?uid='+this.uid).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.docList = res.body.data;\r\n                if(this.docList.length > 0){\r\n                    this.docList[0].active = true;\r\n                    this.doc_id = res.body.data[0]._id;\r\n                    this.docName = res.body.data[0].name;\r\n                    this.getArticleLists();\r\n                }\r\n            });\r\n        },\r\n        getArticleLists:function(){\r\n            this.$http.get('/api/getArticleLists?doc_id='+this.doc_id).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.articleLsts = res.body.data;\r\n                if(this.articleLsts.length > 0){\r\n                    this.articleLsts[0].active = true;\r\n                    this.nowArticleId = res.body.data[0]._id;\r\n                    this.title = res.body.data[0].title;\r\n                    if(this.editors == 2){\r\n                        this.contents = res.body.data[0].markDownText;\r\n                    }else{\r\n                        this.contents = res.body.data[0].contents;\r\n                        this.wangedit.txt.html(this.contents);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        getArticle:function(){\r\n            this.$http.get('/api/getArticle?id='+this.nowArticleId).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.title = res.body.data.article.title;\r\n                this.nowArticleId = res.body.data.article._id;\r\n                if(this.editors == 2){\r\n                    this.contents = res.body.data.article.markDownText;\r\n                    this.editormd.setMarkdown(this.contents);\r\n                }else{\r\n                    this.contents = res.body.data.article.contents;\r\n                    this.wangedit.txt.html(this.contents);\r\n                }\r\n            });\r\n        },\r\n        uploadfile:function(e){\r\n            console.log(e);\r\n            let _this = this;\r\n            let file = e.target.files[0];\r\n            let Reader = new FileReader();\r\n            Reader.addEventListener('load', function(e){\r\n                console.log(e);\r\n                console.log(Reader);\r\n                _this.imgSrc = Reader.result;\r\n            },false);\r\n            Reader.readAsDataURL(file);\r\n        },\r\n        showAccountBox:function(){\r\n            if(this.accountBox == 'none'){\r\n                this.accountBox = 'block';\r\n                this.accountSymbol = '&#xe68d';\r\n            }else{\r\n                this.accountBox = 'none';\r\n                this.accountSymbol = '&#xe68f;'\r\n            }\r\n        },\r\n        createDocument:function(e){\r\n            this.docInputBox='block';\r\n        },\r\n        focus:function(e){\r\n            this.docName = '';\r\n        },\r\n        confirmDocSubmitForm:function(e){\r\n            this.$http.post('/api/newDocument',{\r\n                uid:this.uid,\r\n                name:this.docName\r\n            }).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.docInputBox='none';\r\n                this.getDocLists();\r\n            });\r\n        },\r\n        cleanDocConfirm:function(e){\r\n            this.docInputBox='none';\r\n        },\r\n        documentSetting:function(e,id,index){\r\n            if(this.docMenuShow == 'none'){\r\n                this.docMenuShow = 'block';\r\n            }else{\r\n                this.docMenuShow = 'none';\r\n            }\r\n            this.$refs.menu[index].style.display = this.docMenuShow;\r\n        },\r\n        editDocument:function(e,id,index){\r\n            if(this.docMenuShow == 'none'){\r\n                this.docMenuShow = 'block';\r\n            }else{\r\n                this.docMenuShow = 'none';\r\n            }\r\n            this.$refs.menu[index].style.display = this.docMenuShow;\r\n            this.$refs.showDocumentBox[index].style.display = 'none';\r\n            this.$refs.showDocumentInput[index].style.display = 'block';\r\n            this.$refs.showDocumentInput[index].focus();\r\n        },\r\n        psotDocumentNameEdit:function(e,id,index){\r\n            let value = this.$refs.showDocumentInput[index].value;\r\n            this.$refs.showDocumentBox[index].innerHTML = value;\r\n            this.$http.post('/api/updateDocumentName',{\r\n                uid:this.uid,\r\n                id:id,\r\n                name:value\r\n            }).then(res=>{\r\n                // pass\r\n            });\r\n        },\r\n        documentInputBlur:function(e,id,index){\r\n            this.$refs.showDocumentBox[index].style.display = 'block';\r\n            this.$refs.showDocumentInput[index].style.display = 'none';\r\n            this.$refs.showDocumentBox[index].innerHTML = this.$refs.showDocumentInput[index].value;\r\n        },\r\n        deleteDocument:function(e,id,index){\r\n            this.$http.get('/api/deleteDoc?id='+id+'&uid='+this.uid).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.docMenuShow = 'none';\r\n                this.$refs.menu[index].style.display = this.docMenuShow;\r\n                this.getDocLists();\r\n            });\r\n        },\r\n        createArticle:function(e){\r\n            this.showLoadBut = 'block';\r\n            this.$http.post('/api/newArticle',{\r\n                uid:this.uid,\r\n                doc_id:this.doc_id,\r\n                doc_name:this.docName,\r\n                user_name:this.userName\r\n            }).then(res=>{\r\n                this.showLoadBut = 'none';\r\n                if(!res) throw console.log(res);\r\n                console.log(res);\r\n                this.nowArticleId = res.body.data.id;\r\n                this.getArticleLists();\r\n            });\r\n        },\r\n        saveArticle:function(e,id){\r\n\r\n            // markdownToHTML\r\n            if(this.editors == 2){\r\n                this.markdownText =this.editormd.getMarkdown();\r\n                this.contents = this.editormd.getPreviewedHTML();\r\n            }else{\r\n                this.contents = this.wangedit.txt.html()\r\n            }\r\n\r\n            this.$http.post('/api/saveArticle',{\r\n                id:id,\r\n                title:this.title,\r\n                contents:this.contents,\r\n                markdownText:this.markdownText\r\n            }).then(res=>{\r\n                this.showSaveTip();\r\n            });\r\n        },\r\n        articleSetting:function(e,id,index){\r\n            if(this.articleMenuShow == 'none'){\r\n                this.articleMenuShow = 'block';\r\n            }else{\r\n                this.articleMenuShow = 'none';\r\n            }\r\n            this.$refs.articleMenu[index].style.display = this.articleMenuShow;\r\n        },\r\n        selectDocumentButs:function(e,doc,i){\r\n            this.docList.forEach(item=>{\r\n                Vue.set(item,'active',false);\r\n            })\r\n            this.doc_id = doc._id;\r\n            this.docName = doc.name;\r\n            Vue.set(doc,'active',true);\r\n            this.getArticleLists();\r\n        },\r\n        selectArticleBut:function(e,article,index){\r\n            this.articleLsts.forEach(item=>{\r\n                Vue.set(item,'active',false);\r\n            })\r\n            this.nowArticleId = article._id;\r\n            Vue.set(article,'active',true);\r\n            this.title = article.title;\r\n            this.articleTitleIndex = index;\r\n            this.getArticle();\r\n        },\r\n        releaseArticle:function(e,id,index){\r\n            this.$http.get('/api/releaseArticle?id='+id+'&uid='+this.uid).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.articleMenuShow = 'none';\r\n                this.$refs.articleMenu[index].style.display = this.articleMenuShow;\r\n                this.getArticleLists();\r\n            });\r\n        },\r\n        moveArticle:function(e,id,index){\r\n            if(this.articleMenuDocShow == 'none'){\r\n                this.articleMenuDocShow = 'block';\r\n            }else{\r\n                this.articleMenuDocShow = 'none';\r\n            }\r\n            this.$refs.articlMenuDocumentBlock.style.display = this.articleMenuDocShow;\r\n            this.$refs.articlMenuDocumentBlock.style.top = parseInt((68*(index+1))+72)+'px';\r\n        },\r\n        deleteArticle:function(e,id,index){\r\n            this.$http.get('/api/deleteArticle?id='+id+'&uid='+this.uid).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.articleMenuShow = 'none';\r\n                this.$refs.articleMenu[index].style.display = this.articleMenuShow;\r\n                this.getArticleLists();\r\n            });\r\n        },\r\n        changeArticleTitle:function(e){\r\n\r\n            this.$http.post('/api/changeAticleTitle',{\r\n                uid:this.uid,\r\n                id:this.nowArticleId,\r\n                title:this.title,\r\n            }).then(res=>{\r\n                this.showSaveTip();\r\n            });\r\n            this.$refs.articleTitle[this.articleTitleIndex].innerHTML = this.title;\r\n        },\r\n        showSaveTip:function(){\r\n            this.saveTip = 'block';\r\n            let _this = this;\r\n            setTimeout(function(){\r\n                _this.saveTip='none';\r\n            },200)\r\n        }\r\n    }\r\n});\r\nVM.init();"]}