{"version":3,"sources":["../../../public/js/articleeditor.js"],"names":["VM","Vue","delimiters","el","data","title","contents","markdownText","previewHtml","tags","editors","marked","wangedit","editorsWidth","editorsHeight","wangEditor","markdownEditor","imgSrc","accountSymbol","accountBox","checked","tagLists","uid","token","docName","userName","docList","articleLsts","docInputBox","doc_id","docActive","nowArticleId","showLoadBut","docMenuShow","articleMenuShow","articleMenuDocShow","articleTitleIndex","saveTip","methods","init","getUser","initMarked","w","h","_this","$","editormd","width","height","emoji","syncScrolling","path","toolbarIcons","saveHTMLToTextarea","watch","toolbar","tex","flowChart","sequenceDiagram","dialogLockScreen","dialogShowMask","dialogDraggable","dialogMaskOpacity","dialogMaskBgColor","codeFold","imageUpload","imageFormats","imageUploadURL","onload","onchange","initEditor","E","window","customConfig","menus","create","getToken","$http","get","then","res","console","log","err","body","getTags","winH","document","clientHeight","documentElement","_id","name","getDocLists","length","active","getArticleLists","markDownText","txt","html","getArticle","article","setMarkdown","uploadfile","e","file","target","files","Reader","FileReader","addEventListener","result","readAsDataURL","showAccountBox","createDocument","focus","confirmDocSubmitForm","post","cleanDocConfirm","documentSetting","id","index","$refs","menu","style","display","editDocument","showDocumentBox","showDocumentInput","psotDocumentNameEdit","value","innerHTML","documentInputBlur","deleteDocument","createArticle","doc_name","user_name","saveArticle","getMarkdown","getPreviewedHTML","showSaveTip","articleSetting","articleMenu","selectDocumentButs","doc","i","forEach","set","item","selectArticleBut","releaseArticle","moveArticle","articlMenuDocumentBlock","top","parseInt","deleteArticle","changeArticleTitle","articleTitle","setTimeout"],"mappings":";;AAAA,IAAMA,KAAK,IAAIC,GAAJ,CAAQ;AACfC,gBAAY,CAAC,IAAD,EAAO,GAAP,CADG;AAEfC,QAAG,qBAFY;AAGfC,UAAK;AACDC,eAAM,OADL;AAEDC,kBAAS,UAFR;AAGDC,sBAAa,UAHZ;AAIDC,qBAAY,EAJX;AAKDC,cAAK,IALJ;AAMDC,iBAAQ,CANP;AAODC,gBAAO,IAPN;AAQDC,kBAAS,IARR;AASDC,sBAAa,MATZ;AAUDC,uBAAc,MAVb;AAWDC,oBAAW,OAXV;AAYDC,wBAAe,MAZd;AAaDC,gBAAO,EAbN;AAcDC,uBAAc,UAdb;AAeDC,oBAAW,MAfV;AAgBDC,iBAAQ,KAhBP;AAiBDC,kBAAS,EAjBR;AAkBDC,aAAI,EAlBH;AAmBDC,eAAM,EAnBL;AAoBDC,iBAAQ,QApBP;AAqBDC,kBAAS,EArBR;AAsBDC,iBAAQ,EAtBP;AAuBDC,qBAAY,EAvBX;AAwBDC,qBAAY,MAxBX;AAyBDC,gBAAO,EAzBN;AA0BDC,mBAAU,iBA1BT;AA2BDC,sBAAa,EA3BZ;AA4BDC,qBAAY,MA5BX;AA6BDC,qBAAY,MA7BX;AA8BDC,yBAAgB,MA9Bf;AA+BDC,4BAAmB,MA/BlB;AAgCDC,2BAAkB,CAhCjB;AAiCDC,iBAAQ;AAjCP,KAHU;AAsCfC,aAAQ;AACJC,cAAK,gBAAU;AACX,gBAAGhB,SAAS,EAAT,IAAeD,OAAO,EAAzB,EAA4B;AACxB,qBAAKC,KAAL,GAAaA,KAAb;AACA,qBAAKD,GAAL,GAAWA,GAAX;AACA,qBAAKkB,OAAL;AACH;AACJ,SAPG;AAQJC,oBAAW,oBAASC,CAAT,EAAWC,CAAX,EAAa;AACpB,gBAAIC,QAAQ,IAAZ;AACAC,cAAE,YAAW;AACTD,sBAAME,QAAN,GAAiBA,SAAS,UAAT,EAAqB;AAClCC,2BAAOL,CAD2B;AAElCM,4BAAQL,CAF0B;AAGlCM,2BAAO,IAH2B;AAIlCC,mCAAe,QAJmB;AAKlCC,0BAAM,wBAL4B,EAKF;AAChCC,kCAAe,wBAAW;AACtB;AACA;AACA,+BAAO,CAAC,MAAD,EAAS,MAAT,EAAiB,GAAjB,EAAsB,MAAtB,EAA6B,KAA7B,EAAmC,QAAnC,EAA4C,OAA5C,EAAoD,SAApD,EAA8D,WAA9D,EAA0E,WAA1E,EAAsF,GAAtF,EAA0F,SAA1F,EAAoG,SAApG,EAA+G,IAA/G,EAAqH,GAArH,EAAyH,IAAzH,EAA8H,IAA9H,EAAmI,IAAnI,EAAwI,IAAxI,EAA6I,IAA7I,EAAkJ,IAAlJ,EAAwJ,GAAxJ,EAA4J,MAA5J,EAAmK,OAAnK,EAA4K,MAA5K,EAAmL,mBAAnL,EAAuM,YAAvM,EAAoN,OAApN,EAA4N,OAA5N,EAAoO,eAApO,EAAoP,IAApP,EAA0P,OAA1P,EAAmQ,YAAnQ,EAAiR,SAAjR,EAA2R,OAA3R,EAAmS,MAAnS,CAAP;AACH,qBAViC;AAWlC;AACA;AACA;AACA;AACA;AACAC,wCAAoB,IAhBc,EAgBR;AAC1B;AACA;AACA;AACA;AACA;AACA;AACAC,2BAAO,IAvB2B,EAuBrB;AACb;AACAC,6BAAS,IAzByB,EAyBnB;AACf;AACA;AACAC,yBAAK,KA5B6B,EA4BtB;AACZC,+BAAW,IA7BuB,EA6BjB;AACjBC,qCAAiB,IA9BiB,EA8BX;AACvBC,sCAAkB,KA/BgB,EA+BT;AACzBC,oCAAgB,KAhCkB,EAgCX;AACvBC,qCAAiB,KAjCiB,EAiCV;AACxBC,uCAAmB,GAlCe,EAkCV;AACxBC,uCAAmB,MAnCe,EAmCP;AAC3B;AACAC,8BAAU,IArCwB;AAsClC;AACAC,iCAAa,IAvCqB;AAwClCC,kCAAc,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,KAAvB,EAA8B,KAA9B,EAAqC,MAArC,CAxCoB;AAyClCC,oCAAgB,eAzCkB;AA0ClCC,4BAAQ,kBAAW;AACf;AACA;AACA;AACA;AACA;AACA;AACH,qBAjDiC;AAkDlCC,8BAAS,oBAAU,CAElB;AApDiC,iBAArB,CAAjB;AAsDA;AACH,aAxDD;AAyDH,SAnEG;AAoEJC,oBAAW,oBAAS5B,CAAT,EAAWC,CAAX,EAAa;AACpB,gBAAM4B,IAAIC,OAAOzD,UAAjB;AACA,iBAAKH,QAAL,GAAgB,IAAI2D,CAAJ,CAAM,kBAAN,CAAhB;AACA,iBAAK3D,QAAL,CAAc6D,YAAd,CAA2BC,KAA3B,GAAmC,CAC/B,MAD+B,EACtB;AACT,kBAF+B,EAEtB;AACT,oBAH+B,EAGpB;AACX,uBAJ+B,EAIjB;AACd,2BAL+B,EAKb;AAClB,uBAN+B,EAMjB;AACd,uBAP+B,EAOjB;AACd,kBAR+B,EAQtB;AACT,kBAT+B,EAStB;AACT,qBAV+B,EAUnB;AACZ,mBAX+B,EAWrB;AACV,sBAZ+B,EAYlB;AACb,mBAb+B,EAarB;AACV,mBAd+B,EAcrB;AACV,mBAf+B,EAerB;AACV,kBAhB+B,EAgBtB;AACT,kBAjB+B,EAiBtB;AACT,kBAlB+B,CAkBvB;AAlBuB,aAAnC;AAoBA;AACA;AACA;AACA;AACA;AACA,iBAAK9D,QAAL,CAAc+D,MAAd;AAEH,SAlGG;AAmGJC,kBAAS,oBAAU;AAAA;;AACf,gBAAG,CAAC,KAAKrD,KAAN,IAAe,KAAKA,KAAL,IAAc,EAAhC,EAAmC;AAC/B,qBAAKsD,KAAL,CAAWC,GAAX,CAAe,eAAf,EAAgCC,IAAhC,CAAqC,UAACC,GAAD,EAAO;AACxC,wBAAG,CAACA,GAAJ,EAAS,MAAMC,QAAQC,GAAR,CAAYC,GAAZ,CAAN;AACT,2BAAK5D,KAAL,GAAayD,IAAII,IAAJ,CAAShF,IAAT,CAAcmB,KAA3B;AACH,iBAHD;AAIH;AACJ,SA1GG;AA2GJ8D,iBAAQ,mBAAU;AAAA;;AACd,iBAAKR,KAAL,CAAWC,GAAX,CAAe,WAAf,EAA4BC,IAA5B,CAAiC,eAAK;AAClC,uBAAKtE,IAAL,GAAYuE,IAAII,IAAJ,CAAShF,IAArB;AACH,aAFD;AAGH,SA/GG;AAgHJoC,iBAAQ,mBAAU;AAAA;;AACd,gBAAI8C,OAAOC,SAASH,IAAT,CAAcI,YAAd,IAA8BD,SAASE,eAAT,CAAyBD,YAAlE;AACA,iBAAK1E,aAAL,GAAqBwE,OAAK,IAA1B;AACA,iBAAKT,KAAL,CAAWC,GAAX,CAAe,uBAAqB,KAAKxD,GAAzC,EAA8CyD,IAA9C,CAAmD,eAAK;AACpD,oBAAG,CAACC,GAAJ,EAAS,MAAMC,QAAQC,GAAR,CAAYF,GAAZ,CAAN;AACT,uBAAK1D,GAAL,GAAW0D,IAAII,IAAJ,CAAShF,IAAT,CAAcsF,GAAzB;AACA,uBAAKjE,QAAL,GAAgBuD,IAAII,IAAJ,CAAShF,IAAT,CAAcuF,IAA9B;AACA,uBAAKjF,OAAL,GAAesE,IAAII,IAAJ,CAAShF,IAAT,CAAcM,OAA7B;AACA,oBAAG,OAAKA,OAAL,IAAgB,CAAnB,EAAqB;AACjB,2BAAKM,cAAL,GAAsB,OAAtB;AACA,2BAAKD,UAAL,GAAkB,MAAlB;AACA,2BAAK0B,UAAL,CAAgB,OAAK5B,YAArB,EAAkC,OAAKC,aAAvC;AACH,iBAJD,MAIK;AACD,2BAAKwD,UAAL,CAAgB,OAAKzD,YAArB,EAAkC,OAAKC,aAAvC;AACA,2BAAKE,cAAL,GAAsB,MAAtB;AACA,2BAAKD,UAAL,GAAkB,OAAlB;AACH;AACD,uBAAK6E,WAAL;AACH,aAfD;AAgBH,SAnIG;AAoIJA,qBAAY,uBAAU;AAAA;;AAClB,iBAAKf,KAAL,CAAWC,GAAX,CAAe,0BAAwB,KAAKxD,GAA5C,EAAiDyD,IAAjD,CAAsD,eAAK;AACvD,oBAAG,CAACC,GAAJ,EAAS,MAAMC,QAAQC,GAAR,CAAYF,GAAZ,CAAN;AACT,uBAAKtD,OAAL,GAAesD,IAAII,IAAJ,CAAShF,IAAxB;AACA,oBAAG,OAAKsB,OAAL,CAAamE,MAAb,GAAsB,CAAzB,EAA2B;AACvB,2BAAKnE,OAAL,CAAa,CAAb,EAAgBoE,MAAhB,GAAyB,IAAzB;AACA,2BAAKjE,MAAL,GAAcmD,IAAII,IAAJ,CAAShF,IAAT,CAAc,CAAd,EAAiBsF,GAA/B;AACA,2BAAKlE,OAAL,GAAewD,IAAII,IAAJ,CAAShF,IAAT,CAAc,CAAd,EAAiBuF,IAAhC;AACA,2BAAKI,eAAL;AACH;AACJ,aATD;AAUH,SA/IG;AAgJJA,yBAAgB,2BAAU;AAAA;;AACtB,iBAAKlB,KAAL,CAAWC,GAAX,CAAe,iCAA+B,KAAKjD,MAAnD,EAA2DkD,IAA3D,CAAgE,eAAK;AACjE,oBAAG,CAACC,GAAJ,EAAS,MAAMC,QAAQC,GAAR,CAAYF,GAAZ,CAAN;AACT,uBAAKrD,WAAL,GAAmBqD,IAAII,IAAJ,CAAShF,IAA5B;AACA,oBAAG,OAAKuB,WAAL,CAAiBkE,MAAjB,GAA0B,CAA7B,EAA+B;AAC3B,2BAAKlE,WAAL,CAAiB,CAAjB,EAAoBmE,MAApB,GAA6B,IAA7B;AACA,2BAAK/D,YAAL,GAAoBiD,IAAII,IAAJ,CAAShF,IAAT,CAAc,CAAd,EAAiBsF,GAArC;AACA,2BAAKrF,KAAL,GAAa2E,IAAII,IAAJ,CAAShF,IAAT,CAAc,CAAd,EAAiBC,KAA9B;AACA,wBAAG,OAAKK,OAAL,IAAgB,CAAnB,EAAqB;AACjB,+BAAKJ,QAAL,GAAgB0E,IAAII,IAAJ,CAAShF,IAAT,CAAc,CAAd,EAAiB4F,YAAjC;AACH,qBAFD,MAEK;AACD,+BAAK1F,QAAL,GAAgB0E,IAAII,IAAJ,CAAShF,IAAT,CAAc,CAAd,EAAiBE,QAAjC;AACA,+BAAKM,QAAL,CAAcqF,GAAd,CAAkBC,IAAlB,CAAuB,OAAK5F,QAA5B;AACH;AACJ;AACJ,aAdD;AAeH,SAhKG;AAiKJ6F,oBAAW,sBAAU;AAAA;;AACjB,iBAAKtB,KAAL,CAAWC,GAAX,CAAe,wBAAsB,KAAK/C,YAA1C,EAAwDgD,IAAxD,CAA6D,eAAK;AAC9D,oBAAG,CAACC,GAAJ,EAAS,MAAMC,QAAQC,GAAR,CAAYF,GAAZ,CAAN;AACT,uBAAK3E,KAAL,GAAa2E,IAAII,IAAJ,CAAShF,IAAT,CAAcgG,OAAd,CAAsB/F,KAAnC;AACA,uBAAK0B,YAAL,GAAoBiD,IAAII,IAAJ,CAAShF,IAAT,CAAcgG,OAAd,CAAsBV,GAA1C;AACA,oBAAG,OAAKhF,OAAL,IAAgB,CAAnB,EAAqB;AACjB,2BAAKJ,QAAL,GAAgB0E,IAAII,IAAJ,CAAShF,IAAT,CAAcgG,OAAd,CAAsBJ,YAAtC;AACA,2BAAKlD,QAAL,CAAcuD,WAAd,CAA0B,OAAK/F,QAA/B;AACH,iBAHD,MAGK;AACD,2BAAKA,QAAL,GAAgB0E,IAAII,IAAJ,CAAShF,IAAT,CAAcgG,OAAd,CAAsB9F,QAAtC;AACA,2BAAKM,QAAL,CAAcqF,GAAd,CAAkBC,IAAlB,CAAuB,OAAK5F,QAA5B;AACH;AACJ,aAXD;AAYH,SA9KG;AA+KJgG,oBAAW,oBAASC,CAAT,EAAW;AAClBtB,oBAAQC,GAAR,CAAYqB,CAAZ;AACA,gBAAI3D,QAAQ,IAAZ;AACA,gBAAI4D,OAAOD,EAAEE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAX;AACA,gBAAIC,SAAS,IAAIC,UAAJ,EAAb;AACAD,mBAAOE,gBAAP,CAAwB,MAAxB,EAAgC,UAASN,CAAT,EAAW;AACvCtB,wBAAQC,GAAR,CAAYqB,CAAZ;AACAtB,wBAAQC,GAAR,CAAYyB,MAAZ;AACA/D,sBAAM3B,MAAN,GAAe0F,OAAOG,MAAtB;AACH,aAJD,EAIE,KAJF;AAKAH,mBAAOI,aAAP,CAAqBP,IAArB;AACH,SA1LG;AA2LJQ,wBAAe,0BAAU;AACrB,gBAAG,KAAK7F,UAAL,IAAmB,MAAtB,EAA6B;AACzB,qBAAKA,UAAL,GAAkB,OAAlB;AACA,qBAAKD,aAAL,GAAqB,SAArB;AACH,aAHD,MAGK;AACD,qBAAKC,UAAL,GAAkB,MAAlB;AACA,qBAAKD,aAAL,GAAqB,UAArB;AACH;AACJ,SAnMG;AAoMJ+F,wBAAe,wBAASV,CAAT,EAAW;AACtB,iBAAK3E,WAAL,GAAiB,OAAjB;AACH,SAtMG;AAuMJsF,eAAM,eAASX,CAAT,EAAW;AACb,iBAAK/E,OAAL,GAAe,EAAf;AACH,SAzMG;AA0MJ2F,8BAAqB,8BAASZ,CAAT,EAAW;AAAA;;AAC5B,iBAAK1B,KAAL,CAAWuC,IAAX,CAAgB,kBAAhB,EAAmC;AAC/B9F,qBAAI,KAAKA,GADsB;AAE/BqE,sBAAK,KAAKnE;AAFqB,aAAnC,EAGGuD,IAHH,CAGQ,eAAK;AACT,oBAAG,CAACC,GAAJ,EAAS,MAAMC,QAAQC,GAAR,CAAYF,GAAZ,CAAN;AACT,uBAAKpD,WAAL,GAAiB,MAAjB;AACA,uBAAKgE,WAAL;AACH,aAPD;AAQH,SAnNG;AAoNJyB,yBAAgB,yBAASd,CAAT,EAAW;AACvB,iBAAK3E,WAAL,GAAiB,MAAjB;AACH,SAtNG;AAuNJ0F,yBAAgB,yBAASf,CAAT,EAAWgB,EAAX,EAAcC,KAAd,EAAoB;AAChC,gBAAG,KAAKvF,WAAL,IAAoB,MAAvB,EAA8B;AAC1B,qBAAKA,WAAL,GAAmB,OAAnB;AACH,aAFD,MAEK;AACD,qBAAKA,WAAL,GAAmB,MAAnB;AACH;AACD,iBAAKwF,KAAL,CAAWC,IAAX,CAAgBF,KAAhB,EAAuBG,KAAvB,CAA6BC,OAA7B,GAAuC,KAAK3F,WAA5C;AACH,SA9NG;AA+NJ4F,sBAAa,sBAAStB,CAAT,EAAWgB,EAAX,EAAcC,KAAd,EAAoB;AAC7B,gBAAG,KAAKvF,WAAL,IAAoB,MAAvB,EAA8B;AAC1B,qBAAKA,WAAL,GAAmB,OAAnB;AACH,aAFD,MAEK;AACD,qBAAKA,WAAL,GAAmB,MAAnB;AACH;AACD,iBAAKwF,KAAL,CAAWC,IAAX,CAAgBF,KAAhB,EAAuBG,KAAvB,CAA6BC,OAA7B,GAAuC,KAAK3F,WAA5C;AACA,iBAAKwF,KAAL,CAAWK,eAAX,CAA2BN,KAA3B,EAAkCG,KAAlC,CAAwCC,OAAxC,GAAkD,MAAlD;AACA,iBAAKH,KAAL,CAAWM,iBAAX,CAA6BP,KAA7B,EAAoCG,KAApC,CAA0CC,OAA1C,GAAoD,OAApD;AACA,iBAAKH,KAAL,CAAWM,iBAAX,CAA6BP,KAA7B,EAAoCN,KAApC;AACH,SAzOG;AA0OJc,8BAAqB,8BAASzB,CAAT,EAAWgB,EAAX,EAAcC,KAAd,EAAoB;AACrC,gBAAIS,QAAQ,KAAKR,KAAL,CAAWM,iBAAX,CAA6BP,KAA7B,EAAoCS,KAAhD;AACA,iBAAKR,KAAL,CAAWK,eAAX,CAA2BN,KAA3B,EAAkCU,SAAlC,GAA8CD,KAA9C;AACA,iBAAKpD,KAAL,CAAWuC,IAAX,CAAgB,yBAAhB,EAA0C;AACtC9F,qBAAI,KAAKA,GAD6B;AAEtCiG,oBAAGA,EAFmC;AAGtChG,uBAAM,KAAKA,KAH2B;AAItCoE,sBAAKsC;AAJiC,aAA1C,EAKGlD,IALH,CAKQ,eAAK;AACT;AACH,aAPD;AAQH,SArPG;AAsPJoD,2BAAkB,2BAAS5B,CAAT,EAAWgB,EAAX,EAAcC,KAAd,EAAoB;AAClC,iBAAKC,KAAL,CAAWK,eAAX,CAA2BN,KAA3B,EAAkCG,KAAlC,CAAwCC,OAAxC,GAAkD,OAAlD;AACA,iBAAKH,KAAL,CAAWM,iBAAX,CAA6BP,KAA7B,EAAoCG,KAApC,CAA0CC,OAA1C,GAAoD,MAApD;AACA,iBAAKH,KAAL,CAAWK,eAAX,CAA2BN,KAA3B,EAAkCU,SAAlC,GAA8C,KAAKT,KAAL,CAAWM,iBAAX,CAA6BP,KAA7B,EAAoCS,KAAlF;AACH,SA1PG;AA2PJG,wBAAe,wBAAS7B,CAAT,EAAWgB,EAAX,EAAcC,KAAd,EAAoB;AAAA;;AAC/B,iBAAK3C,KAAL,CAAWC,GAAX,CAAe,uBAAqByC,EAArB,GAAwB,OAAxB,GAAgC,KAAKjG,GAArC,GAAyC,SAAzC,GAAmD,KAAKC,KAAvE,EAA8EwD,IAA9E,CAAmF,eAAK;AACpF,oBAAG,CAACC,GAAJ,EAAS,MAAMC,QAAQC,GAAR,CAAYF,GAAZ,CAAN;AACT,uBAAK/C,WAAL,GAAmB,MAAnB;AACA,uBAAKwF,KAAL,CAAWC,IAAX,CAAgBF,KAAhB,EAAuBG,KAAvB,CAA6BC,OAA7B,GAAuC,OAAK3F,WAA5C;AACA,uBAAK2D,WAAL;AACH,aALD;AAMH,SAlQG;AAmQJyC,uBAAc,uBAAS9B,CAAT,EAAW;AAAA;;AACrB,iBAAKvE,WAAL,GAAmB,OAAnB;AACA,iBAAK6C,KAAL,CAAWuC,IAAX,CAAgB,iBAAhB,EAAkC;AAC9B9F,qBAAI,KAAKA,GADqB;AAE9BO,wBAAO,KAAKA,MAFkB;AAG9ByG,0BAAS,KAAK9G,OAHgB;AAI9B+G,2BAAU,KAAK9G,QAJe;AAK9BF,uBAAM,KAAKA;AALmB,aAAlC,EAMGwD,IANH,CAMQ,eAAK;AACT,wBAAK/C,WAAL,GAAmB,MAAnB;AACA,oBAAG,CAACgD,GAAJ,EAAS,MAAMC,QAAQC,GAAR,CAAYF,GAAZ,CAAN;AACTC,wBAAQC,GAAR,CAAYF,GAAZ;AACA,wBAAKjD,YAAL,GAAoBiD,IAAII,IAAJ,CAAShF,IAAT,CAAcmH,EAAlC;AACA,wBAAKxB,eAAL;AACH,aAZD;AAaH,SAlRG;AAmRJyC,qBAAY,qBAASjC,CAAT,EAAWgB,EAAX,EAAc;AAAA;;AAEtB;AACA,gBAAG,KAAK7G,OAAL,IAAgB,CAAnB,EAAqB;AACjB,qBAAKH,YAAL,GAAmB,KAAKuC,QAAL,CAAc2F,WAAd,EAAnB;AACA,qBAAKnI,QAAL,GAAgB,KAAKwC,QAAL,CAAc4F,gBAAd,EAAhB;AACH,aAHD,MAGK;AACD,qBAAKpI,QAAL,GAAgB,KAAKM,QAAL,CAAcqF,GAAd,CAAkBC,IAAlB,EAAhB;AACH;;AAED,iBAAKrB,KAAL,CAAWuC,IAAX,CAAgB,kBAAhB,EAAmC;AAC/BG,oBAAGA,EAD4B;AAE/BlH,uBAAM,KAAKA,KAFoB;AAG/BC,0BAAS,KAAKA,QAHiB;AAI/BC,8BAAa,KAAKA;AAJa,aAAnC,EAKGwE,IALH,CAKQ,eAAK;AACT,wBAAK4D,WAAL;AACH,aAPD;AAQH,SArSG;AAsSJC,wBAAe,wBAASrC,CAAT,EAAWgB,EAAX,EAAcC,KAAd,EAAoB;AAC/B,gBAAG,KAAKtF,eAAL,IAAwB,MAA3B,EAAkC;AAC9B,qBAAKA,eAAL,GAAuB,OAAvB;AACH,aAFD,MAEK;AACD,qBAAKA,eAAL,GAAuB,MAAvB;AACH;AACD,iBAAKuF,KAAL,CAAWoB,WAAX,CAAuBrB,KAAvB,EAA8BG,KAA9B,CAAoCC,OAApC,GAA8C,KAAK1F,eAAnD;AACH,SA7SG;AA8SJ4G,4BAAmB,4BAASvC,CAAT,EAAWwC,GAAX,EAAeC,CAAf,EAAiB;AAChC,iBAAKtH,OAAL,CAAauH,OAAb,CAAqB,gBAAM;AACvBhJ,oBAAIiJ,GAAJ,CAAQC,IAAR,EAAa,QAAb,EAAsB,KAAtB;AACH,aAFD;AAGA,iBAAKtH,MAAL,GAAckH,IAAIrD,GAAlB;AACA,iBAAKlE,OAAL,GAAeuH,IAAIpD,IAAnB;AACA1F,gBAAIiJ,GAAJ,CAAQH,GAAR,EAAY,QAAZ,EAAqB,IAArB;AACA,iBAAKhD,eAAL;AACH,SAtTG;AAuTJqD,0BAAiB,0BAAS7C,CAAT,EAAWH,OAAX,EAAmBoB,KAAnB,EAAyB;AACtC,iBAAK7F,WAAL,CAAiBsH,OAAjB,CAAyB,gBAAM;AAC3BhJ,oBAAIiJ,GAAJ,CAAQC,IAAR,EAAa,QAAb,EAAsB,KAAtB;AACH,aAFD;AAGA,iBAAKpH,YAAL,GAAoBqE,QAAQV,GAA5B;AACAzF,gBAAIiJ,GAAJ,CAAQ9C,OAAR,EAAgB,QAAhB,EAAyB,IAAzB;AACA,iBAAK/F,KAAL,GAAa+F,QAAQ/F,KAArB;AACA,iBAAK+B,iBAAL,GAAyBoF,KAAzB;AACA,iBAAKrB,UAAL;AACH,SAhUG;AAiUJkD,wBAAe,wBAAS9C,CAAT,EAAWgB,EAAX,EAAcC,KAAd,EAAoB;AAAA;;AAC/B,iBAAK3C,KAAL,CAAWC,GAAX,CAAe,4BAA0ByC,EAA1B,GAA6B,OAA7B,GAAqC,KAAKjG,GAA1C,GAA8C,SAA9C,GAAwD,KAAKC,KAA5E,EAAmFwD,IAAnF,CAAwF,eAAK;AACzF,oBAAG,CAACC,GAAJ,EAAS,MAAMC,QAAQC,GAAR,CAAYF,GAAZ,CAAN;AACT,wBAAK9C,eAAL,GAAuB,MAAvB;AACA,wBAAKuF,KAAL,CAAWoB,WAAX,CAAuBrB,KAAvB,EAA8BG,KAA9B,CAAoCC,OAApC,GAA8C,QAAK1F,eAAnD;AACA,wBAAK6D,eAAL;AACH,aALD;AAMH,SAxUG;AAyUJuD,qBAAY,qBAAS/C,CAAT,EAAWgB,EAAX,EAAcC,KAAd,EAAoB;AAC5B,gBAAG,KAAKrF,kBAAL,IAA2B,MAA9B,EAAqC;AACjC,qBAAKA,kBAAL,GAA0B,OAA1B;AACH,aAFD,MAEK;AACD,qBAAKA,kBAAL,GAA0B,MAA1B;AACH;AACD,iBAAKsF,KAAL,CAAW8B,uBAAX,CAAmC5B,KAAnC,CAAyCC,OAAzC,GAAmD,KAAKzF,kBAAxD;AACA,iBAAKsF,KAAL,CAAW8B,uBAAX,CAAmC5B,KAAnC,CAAyC6B,GAAzC,GAA+CC,SAAU,MAAIjC,QAAM,CAAV,CAAD,GAAe,EAAxB,IAA4B,IAA3E;AACH,SAjVG;AAkVJkC,uBAAc,uBAASnD,CAAT,EAAWgB,EAAX,EAAcC,KAAd,EAAoB;AAAA;;AAC9B,iBAAK3C,KAAL,CAAWC,GAAX,CAAe,2BAAyByC,EAAzB,GAA4B,OAA5B,GAAoC,KAAKjG,GAAzC,GAA6C,SAA7C,GAAuD,KAAKC,KAA3E,EAAkFwD,IAAlF,CAAuF,eAAK;AACxF,oBAAG,CAACC,GAAJ,EAAS,MAAMC,QAAQC,GAAR,CAAYF,GAAZ,CAAN;AACT,wBAAK9C,eAAL,GAAuB,MAAvB;AACA,wBAAKuF,KAAL,CAAWoB,WAAX,CAAuBrB,KAAvB,EAA8BG,KAA9B,CAAoCC,OAApC,GAA8C,QAAK1F,eAAnD;AACA,wBAAK6D,eAAL;AACH,aALD;AAMH,SAzVG;AA0VJ4D,4BAAmB,4BAASpD,CAAT,EAAW;AAAA;;AAE1B,iBAAK1B,KAAL,CAAWuC,IAAX,CAAgB,wBAAhB,EAAyC;AACrC9F,qBAAI,KAAKA,GAD4B;AAErCC,uBAAM,KAAKA,KAF0B;AAGrCgG,oBAAG,KAAKxF,YAH6B;AAIrC1B,uBAAM,KAAKA;AAJ0B,aAAzC,EAKG0E,IALH,CAKQ,eAAK;AACT,wBAAK4D,WAAL;AACH,aAPD;AAQA,iBAAKlB,KAAL,CAAWmC,YAAX,CAAwB,KAAKxH,iBAA7B,EAAgD8F,SAAhD,GAA4D,KAAK7H,KAAjE;AACH,SArWG;AAsWJsI,qBAAY,uBAAU;AAClB,iBAAKtG,OAAL,GAAe,OAAf;AACA,gBAAIO,QAAQ,IAAZ;AACAiH,uBAAW,YAAU;AACjBjH,sBAAMP,OAAN,GAAc,MAAd;AACH,aAFD,EAEE,GAFF;AAGH;AA5WG;AAtCO,CAAR,CAAX;AAqZArC,GAAGuC,IAAH","file":"articleeditor.js","sourcesContent":["const VM = new Vue({\r\n    delimiters: ['${', '}'],\r\n    el:'#article-editor-app',\r\n    data:{\r\n        title:'无标题文档',\r\n        contents:'### 文章详情',\r\n        markdownText:'### 文章详情',\r\n        previewHtml:'',\r\n        tags:null,\r\n        editors:2,\r\n        marked:null,\r\n        wangedit:null,\r\n        editorsWidth:\"100%\",\r\n        editorsHeight:\"100%\",\r\n        wangEditor:'block',\r\n        markdownEditor:'none',\r\n        imgSrc:'',\r\n        accountSymbol:'&#xe68f;',\r\n        accountBox:'none',\r\n        checked:false,\r\n        tagLists:[],\r\n        uid:'',\r\n        token:'',\r\n        docName:'输入文集名称',\r\n        userName:'',\r\n        docList:[],\r\n        articleLsts:[],\r\n        docInputBox:'none',\r\n        doc_id:'',\r\n        docActive:'document-active',\r\n        nowArticleId:'',\r\n        showLoadBut:'none',\r\n        docMenuShow:'none',\r\n        articleMenuShow:'none',\r\n        articleMenuDocShow:'none',\r\n        articleTitleIndex:0,\r\n        saveTip:'none'\r\n    },\r\n    methods:{\r\n        init:function(){\r\n            if(token != '' && uid != ''){\r\n                this.token = token;\r\n                this.uid = uid;\r\n                this.getUser();\r\n            }\r\n        },\r\n        initMarked:function(w,h){\r\n            let _this = this;\r\n            $(function() {\r\n                _this.editormd = editormd(\"editormd\", {\r\n                    width: w,\r\n                    height: h,\r\n                    emoji: true,\r\n                    syncScrolling: \"single\",\r\n                    path: \"/public/js/marked/lib/\", // Autoload modules mode, codemirror, marked... dependents libs path\r\n                    toolbarIcons : function() {\r\n                        // return editormd.toolbarModes['full']; // full, simple, mini\r\n                        // Using \"||\" set icons align right.\r\n                        return [\"undo\", \"redo\", \"|\", \"bold\",\"del\",\"italic\",\"quote\",\"ucwords\",\"uppercase\",\"lowercase\",\"|\",\"list-ul\",\"list-ol\", \"hr\", \"|\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\", \"|\",\"link\",\"image\", \"code\",\"preformatted-text\",\"code-block\",\"emoji\",\"table\",\"html-entities\",\"||\", \"watch\", \"fullscreen\", \"preview\",\"clear\",\"help\"]\r\n                    },\r\n                    // theme: \"dark\",\r\n                    // previewTheme: \"dark\",\r\n                    // editorTheme: \"pastel-on-dark\",\r\n                    // //markdown: md,\r\n                    // codeFold: true,\r\n                    saveHTMLToTextarea: true, //注意3：这个配置，方便post提交表单\r\n                    // /**设置主题颜色*/\r\n                    // // editorTheme: \"pastel-on-dark\",\r\n                    // theme: \"gray\",\r\n                    // previewTheme: \"dark\",\r\n                    // // taskList: true,\r\n                    // searchReplace: true,\r\n                    watch: true, // 关闭实时预览\r\n                    // htmlDecode: \"style,script,iframe|on*\", // 开启 HTML 标签解析，为了安全性，默认不开启\r\n                    toolbar: true, //关闭工具栏\r\n                    // previewCodeHighlight: false, // 关闭预览 HTML 的代码块高亮，默认开启\r\n                    // tocm: true, // Using [TOCM]\r\n                    tex: false, // 开启科学公式TeX语言支持，默认关闭\r\n                    flowChart: true, //开启流程图支持，默认关闭\r\n                    sequenceDiagram: true, //开启时序/序列图支持，默认关闭,\r\n                    dialogLockScreen: false, //设置弹出层对话框不锁屏，全局通用，默认为true\r\n                    dialogShowMask: false, //设置弹出层对话框显示透明遮罩层，全局通用，默认为true\r\n                    dialogDraggable: false, //设置弹出层对话框不可拖动，全局通用，默认为true\r\n                    dialogMaskOpacity: 0.4, //设置透明遮罩层的透明度，全局通用，默认值为0.1\r\n                    dialogMaskBgColor: \"#000\", //设置透明遮罩层的背景颜色，全局通用，默认为#fff\r\n                    //\r\n                    codeFold: true,\r\n                    //\r\n                    imageUpload: true,\r\n                    imageFormats: [\"jpg\", \"jpeg\", \"gif\", \"png\", \"bmp\", \"webp\"],\r\n                    imageUploadURL: \"/api/uploader\",\r\n                    onload: function() {\r\n                        //this.fullscreen();\r\n                        //this.unwatch();\r\n                        //this.watch().fullscreen();\r\n                        //this.width(\"100%\");\r\n                        //this.height(480);\r\n                        //this.resize(\"100%\", 640);\r\n                    },\r\n                    onchange:function(){\r\n\r\n                    }\r\n                });\r\n                // _this.editormd.config(\"toolbarAutoFixed\", false);\r\n            });\r\n        },\r\n        initEditor:function(w,h){\r\n            const E = window.wangEditor;\r\n            this.wangedit = new E('#exampleTextarea');\r\n            this.wangedit.customConfig.menus = [\r\n                'head',  // 标题\r\n                'bold',  // 粗体\r\n                'italic',  // 斜体\r\n                'underline',  // 下划线\r\n                'strikeThrough',  // 删除线\r\n                'foreColor',  // 文字颜色\r\n                'backColor',  // 背景颜色\r\n                'link',  // 插入链接\r\n                'list',  // 列表\r\n                'justify',  // 对齐方式\r\n                'quote',  // 引用\r\n                'emoticon',  // 表情\r\n                'image',  // 插入图片\r\n                'table',  // 表格\r\n                'video',  // 插入视频\r\n                'code',  // 插入代码\r\n                'undo',  // 撤销\r\n                'redo'  // 重复\r\n            ];\r\n            // editor.customConfig.onchange = function (html) {\r\n            //     // html 即变化之后的内容\r\n            //     this.contents = html;\r\n            //     // console.log(html)\r\n            // }\r\n            this.wangedit.create();\r\n\r\n        },\r\n        getToken:function(){\r\n            if(!this.token || this.token == ''){\r\n                this.$http.get('/api/gettoken').then((res)=>{\r\n                    if(!res) throw console.log(err);\r\n                    this.token = res.body.data.token;\r\n                })\r\n            }\r\n        },\r\n        getTags:function(){\r\n            this.$http.get('/api/tags').then(res=>{\r\n                this.tags = res.body.data;\r\n            });\r\n        },\r\n        getUser:function(){\r\n            let winH = document.body.clientHeight || document.documentElement.clientHeight;\r\n            this.editorsHeight = winH+'px';\r\n            this.$http.get('/api/getUsers?uid='+this.uid).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.uid = res.body.data._id;\r\n                this.userName = res.body.data.name;\r\n                this.editors = res.body.data.editors;\r\n                if(this.editors == 2){\r\n                    this.markdownEditor = 'block';\r\n                    this.wangEditor = 'none';\r\n                    this.initMarked(this.editorsWidth,this.editorsHeight);\r\n                }else{\r\n                    this.initEditor(this.editorsWidth,this.editorsHeight);\r\n                    this.markdownEditor = 'none';\r\n                    this.wangEditor = 'block';\r\n                }\r\n                this.getDocLists();\r\n            });\r\n        },\r\n        getDocLists:function(){\r\n            this.$http.get('/api/getDocLists?uid='+this.uid).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.docList = res.body.data;\r\n                if(this.docList.length > 0){\r\n                    this.docList[0].active = true;\r\n                    this.doc_id = res.body.data[0]._id;\r\n                    this.docName = res.body.data[0].name;\r\n                    this.getArticleLists();\r\n                }\r\n            });\r\n        },\r\n        getArticleLists:function(){\r\n            this.$http.get('/api/getArticleLists?doc_id='+this.doc_id).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.articleLsts = res.body.data;\r\n                if(this.articleLsts.length > 0){\r\n                    this.articleLsts[0].active = true;\r\n                    this.nowArticleId = res.body.data[0]._id;\r\n                    this.title = res.body.data[0].title;\r\n                    if(this.editors == 2){\r\n                        this.contents = res.body.data[0].markDownText;\r\n                    }else{\r\n                        this.contents = res.body.data[0].contents;\r\n                        this.wangedit.txt.html(this.contents);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        getArticle:function(){\r\n            this.$http.get('/api/getArticle?id='+this.nowArticleId).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.title = res.body.data.article.title;\r\n                this.nowArticleId = res.body.data.article._id;\r\n                if(this.editors == 2){\r\n                    this.contents = res.body.data.article.markDownText;\r\n                    this.editormd.setMarkdown(this.contents);\r\n                }else{\r\n                    this.contents = res.body.data.article.contents;\r\n                    this.wangedit.txt.html(this.contents);\r\n                }\r\n            });\r\n        },\r\n        uploadfile:function(e){\r\n            console.log(e);\r\n            let _this = this;\r\n            let file = e.target.files[0];\r\n            let Reader = new FileReader();\r\n            Reader.addEventListener('load', function(e){\r\n                console.log(e);\r\n                console.log(Reader);\r\n                _this.imgSrc = Reader.result;\r\n            },false);\r\n            Reader.readAsDataURL(file);\r\n        },\r\n        showAccountBox:function(){\r\n            if(this.accountBox == 'none'){\r\n                this.accountBox = 'block';\r\n                this.accountSymbol = '&#xe68d';\r\n            }else{\r\n                this.accountBox = 'none';\r\n                this.accountSymbol = '&#xe68f;'\r\n            }\r\n        },\r\n        createDocument:function(e){\r\n            this.docInputBox='block';\r\n        },\r\n        focus:function(e){\r\n            this.docName = '';\r\n        },\r\n        confirmDocSubmitForm:function(e){\r\n            this.$http.post('/api/newDocument',{\r\n                uid:this.uid,\r\n                name:this.docName\r\n            }).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.docInputBox='none';\r\n                this.getDocLists();\r\n            });\r\n        },\r\n        cleanDocConfirm:function(e){\r\n            this.docInputBox='none';\r\n        },\r\n        documentSetting:function(e,id,index){\r\n            if(this.docMenuShow == 'none'){\r\n                this.docMenuShow = 'block';\r\n            }else{\r\n                this.docMenuShow = 'none';\r\n            }\r\n            this.$refs.menu[index].style.display = this.docMenuShow;\r\n        },\r\n        editDocument:function(e,id,index){\r\n            if(this.docMenuShow == 'none'){\r\n                this.docMenuShow = 'block';\r\n            }else{\r\n                this.docMenuShow = 'none';\r\n            }\r\n            this.$refs.menu[index].style.display = this.docMenuShow;\r\n            this.$refs.showDocumentBox[index].style.display = 'none';\r\n            this.$refs.showDocumentInput[index].style.display = 'block';\r\n            this.$refs.showDocumentInput[index].focus();\r\n        },\r\n        psotDocumentNameEdit:function(e,id,index){\r\n            let value = this.$refs.showDocumentInput[index].value;\r\n            this.$refs.showDocumentBox[index].innerHTML = value;\r\n            this.$http.post('/api/updateDocumentName',{\r\n                uid:this.uid,\r\n                id:id,\r\n                token:this.token,\r\n                name:value\r\n            }).then(res=>{\r\n                // pass\r\n            });\r\n        },\r\n        documentInputBlur:function(e,id,index){\r\n            this.$refs.showDocumentBox[index].style.display = 'block';\r\n            this.$refs.showDocumentInput[index].style.display = 'none';\r\n            this.$refs.showDocumentBox[index].innerHTML = this.$refs.showDocumentInput[index].value;\r\n        },\r\n        deleteDocument:function(e,id,index){\r\n            this.$http.get('/api/deleteDoc?id='+id+'&uid='+this.uid+'&token='+this.token).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.docMenuShow = 'none';\r\n                this.$refs.menu[index].style.display = this.docMenuShow;\r\n                this.getDocLists();\r\n            });\r\n        },\r\n        createArticle:function(e){\r\n            this.showLoadBut = 'block';\r\n            this.$http.post('/api/newArticle',{\r\n                uid:this.uid,\r\n                doc_id:this.doc_id,\r\n                doc_name:this.docName,\r\n                user_name:this.userName,\r\n                token:this.token\r\n            }).then(res=>{\r\n                this.showLoadBut = 'none';\r\n                if(!res) throw console.log(res);\r\n                console.log(res);\r\n                this.nowArticleId = res.body.data.id;\r\n                this.getArticleLists();\r\n            });\r\n        },\r\n        saveArticle:function(e,id){\r\n\r\n            // markdownToHTML\r\n            if(this.editors == 2){\r\n                this.markdownText =this.editormd.getMarkdown();\r\n                this.contents = this.editormd.getPreviewedHTML();\r\n            }else{\r\n                this.contents = this.wangedit.txt.html()\r\n            }\r\n\r\n            this.$http.post('/api/saveArticle',{\r\n                id:id,\r\n                title:this.title,\r\n                contents:this.contents,\r\n                markdownText:this.markdownText\r\n            }).then(res=>{\r\n                this.showSaveTip();\r\n            });\r\n        },\r\n        articleSetting:function(e,id,index){\r\n            if(this.articleMenuShow == 'none'){\r\n                this.articleMenuShow = 'block';\r\n            }else{\r\n                this.articleMenuShow = 'none';\r\n            }\r\n            this.$refs.articleMenu[index].style.display = this.articleMenuShow;\r\n        },\r\n        selectDocumentButs:function(e,doc,i){\r\n            this.docList.forEach(item=>{\r\n                Vue.set(item,'active',false);\r\n            })\r\n            this.doc_id = doc._id;\r\n            this.docName = doc.name;\r\n            Vue.set(doc,'active',true);\r\n            this.getArticleLists();\r\n        },\r\n        selectArticleBut:function(e,article,index){\r\n            this.articleLsts.forEach(item=>{\r\n                Vue.set(item,'active',false);\r\n            })\r\n            this.nowArticleId = article._id;\r\n            Vue.set(article,'active',true);\r\n            this.title = article.title;\r\n            this.articleTitleIndex = index;\r\n            this.getArticle();\r\n        },\r\n        releaseArticle:function(e,id,index){\r\n            this.$http.get('/api/releaseArticle?id='+id+'&uid='+this.uid+'&token='+this.token).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.articleMenuShow = 'none';\r\n                this.$refs.articleMenu[index].style.display = this.articleMenuShow;\r\n                this.getArticleLists();\r\n            });\r\n        },\r\n        moveArticle:function(e,id,index){\r\n            if(this.articleMenuDocShow == 'none'){\r\n                this.articleMenuDocShow = 'block';\r\n            }else{\r\n                this.articleMenuDocShow = 'none';\r\n            }\r\n            this.$refs.articlMenuDocumentBlock.style.display = this.articleMenuDocShow;\r\n            this.$refs.articlMenuDocumentBlock.style.top = parseInt((68*(index+1))+72)+'px';\r\n        },\r\n        deleteArticle:function(e,id,index){\r\n            this.$http.get('/api/deleteArticle?id='+id+'&uid='+this.uid+'&token='+this.token).then(res=>{\r\n                if(!res) throw console.log(res);\r\n                this.articleMenuShow = 'none';\r\n                this.$refs.articleMenu[index].style.display = this.articleMenuShow;\r\n                this.getArticleLists();\r\n            });\r\n        },\r\n        changeArticleTitle:function(e){\r\n\r\n            this.$http.post('/api/changeAticleTitle',{\r\n                uid:this.uid,\r\n                token:this.token,\r\n                id:this.nowArticleId,\r\n                title:this.title,\r\n            }).then(res=>{\r\n                this.showSaveTip();\r\n            });\r\n            this.$refs.articleTitle[this.articleTitleIndex].innerHTML = this.title;\r\n        },\r\n        showSaveTip:function(){\r\n            this.saveTip = 'block';\r\n            let _this = this;\r\n            setTimeout(function(){\r\n                _this.saveTip='none';\r\n            },200)\r\n        }\r\n    }\r\n});\r\nVM.init();"]}