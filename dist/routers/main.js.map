{"version":3,"sources":["../../routers/main.js"],"names":["express","require","ctr_token","router","Router","get","req","res","next","render","token","uid","page_type","title","redirect","coll_id","query","id","module","exports"],"mappings":"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","file":"main.js","sourcesContent":["const express = require('express');\nconst ctr_token = require('../libs/ctr_token');\nconst router = express.Router();\nrouter.get('/', (req, res, next) => {\n    res.render('../views/index',{\n        token:req.token,\n        uid:req.uid,\n        page_type: 'index',\n        title:'博客'\n    });\n});\n\nrouter.get('/editor',(req,res,next)=>{\n    if(req.token && req.uid){\n        res.render('../views/article_editor',{\n            token:req.token,\n            uid:req.uid,\n            page_type: 'editor',\n        });\n    }else{\n        res.redirect(302,'/login');\n    }\n\n});\n\nrouter.get('/upfile',(req,res,next)=>{\n    if(req.token && req.uid){\n        res.render('../views/upfile',{\n            token:req.token,\n            uid:req.uid,\n            page_type: 'upfile',\n        });\n    }else{\n        res.redirect(302,'/login');\n    }\n})\n\nrouter.get('/account',(req,res,next)=>{\n    if(req.token && req.uid){\n        res.render('../views/account',{\n            token:req.token,\n            uid:req.uid,\n            page_type: 'account',\n            title:'我的主页'\n        });\n    }else{\n        res.redirect(302,'/login');\n    }\n})\n\nrouter.get('/account/collections/lists',(req,res,next)=>{\n    res.render('../views/account/collections/lists',{\n        token:req.token,\n        page_type: 'collections_list',\n        uid:req.uid,\n        title:'专题列表'\n    });\n});\n\nrouter.get('/account/collections/new',(req,res,next)=>{\n    if(req.token && req.uid){\n        res.render('../views/account/collections/new',{\n            token:req.token,\n            page_type: 'collections_new',\n            uid:req.uid,\n            title:'专题列表'\n        });\n    }else{\n        res.redirect(302,'/login');\n    }\n})\n\nrouter.get('/account/collections/detailes',(req,res,next)=>{\n    res.render('../views/account/collections/detailes',{\n        token:req.token,\n        page_type: 'collections_detailes',\n        uid:req.uid,\n        coll_id:req.query.id,\n        title:'专题详情'\n    });\n});\n\nrouter.get('/register',(req,res,next)=>{\n    res.render('../views/register');\n});\n\nrouter.get('/login', (req, res, next) => {\n    res.render('../views/login');\n});\n\nmodule.exports = router;"]}