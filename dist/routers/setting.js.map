{"version":3,"sources":["../../routers/setting.js"],"names":["express","require","ctr_token","router","Router","get","req","res","nex","redirect_uri","protocol","originalUrl","session","uid","cookies","render","page_type","title","redirect","module","exports"],"mappings":"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","file":"setting.js","sourcesContent":["const express = require('express');\nconst ctr_token = require('../libs/ctr_token');\nconst router = express.Router();\n\nrouter.get('/basic',(req,res,nex)=>{\n    let redirect_uri = req.protocol + '://' + req.get('host') + req.originalUrl;\n    if(req.session.uid && req.cookies.uid){\n        res.render('../views/setting/basic',{\n            uid:req.session.uid || req.cookies.uid,\n            page_type: 'setting_basic',\n            title:'用户设置'\n        });\n    }else{\n        res.redirect(302,'/login?redirect_uri='+redirect_uri);\n    }\n});\n\nrouter.get('/profile',(req,res,nex)=>{\n    let redirect_uri = req.protocol + '://' + req.get('host') + req.originalUrl;\n    if(req.session.uid && req.cookies.uid){\n        res.render('../views/setting/profile',{\n            uid:req.session.uid || req.cookies.uid,\n            page_type: 'setting_profile',\n            title:'用户设置'\n        });\n    }else{\n        res.redirect(302,'/login?redirect_uri='+redirect_uri);\n    }\n});\n\nrouter.get('/blogs',(req,res,nex)=>{\n    let redirect_uri = req.protocol + '://' + req.get('host') + req.originalUrl;\n    if(req.session.uid && req.cookies.uid){\n        res.render('../views/setting/blogs',{\n            uid:req.session.uid || req.cookies.uid,\n            page_type: 'setting_blogs',\n            title:'用户设置'\n        });\n    }else{\n        res.redirect(302,'/login?redirect_uri='+redirect_uri);\n    }\n});\n\nrouter.get('/reward',(req,res,nex)=>{\n    let redirect_uri = req.protocol + '://' + req.get('host') + req.originalUrl;\n    if(req.session.uid && req.cookies.uid){\n        res.render('../views/setting/reward',{\n            uid:req.session.uid || req.cookies.uid,\n            page_type: 'setting_reward',\n            title:'用户设置'\n        });\n    }else{\n        res.redirect(302,'/login?redirect_uri='+redirect_uri);\n    }\n});\n\nrouter.get('/misc',(req,res,nex)=>{\n    let redirect_uri = req.protocol + '://' + req.get('host') + req.originalUrl;\n    if(req.session.uid && req.cookies.uid){\n        res.render('../views/setting/misc',{\n            uid:req.session.uid || req.cookies.uid,\n            page_type: 'setting_misc',\n            title:'用户设置'\n        });\n    }else{\n        res.redirect(302,'/login?redirect_uri='+redirect_uri);\n    }\n});\n\n\nmodule.exports = router;"]}