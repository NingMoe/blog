{"version":3,"sources":["../../../../../../../../../app/public/js/marked/lib/codemirror/addon/display/panel.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","defineExtension","node","options","state","panels","initPanels","info","position","wrapper","appendChild","insertBefore","firstChild","height","offsetHeight","_setSize","heightLeft","Panel","cm","cleared","prototype","clear","removeChild","removePanels","changed","newHeight","wrap","getWrapperElement","style","window","getComputedStyle","currentStyle","parseInt","setHeight","document","createElement","parentNode","hasFocus","focus","setSize","width","px","exec","Number","replaceChild"],"mappings":"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","file":"panel.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  CodeMirror.defineExtension(\"addPanel\", function(node, options) {\n    if (!this.state.panels) initPanels(this);\n\n    var info = this.state.panels;\n    if (options && options.position == \"bottom\")\n      info.wrapper.appendChild(node);\n    else\n      info.wrapper.insertBefore(node, info.wrapper.firstChild);\n    var height = (options && options.height) || node.offsetHeight;\n    this._setSize(null, info.heightLeft -= height);\n    info.panels++;\n    return new Panel(this, node, options, height);\n  });\n\n  function Panel(cm, node, options, height) {\n    this.cm = cm;\n    this.node = node;\n    this.options = options;\n    this.height = height;\n    this.cleared = false;\n  }\n\n  Panel.prototype.clear = function() {\n    if (this.cleared) return;\n    this.cleared = true;\n    var info = this.cm.state.panels;\n    this.cm._setSize(null, info.heightLeft += this.height);\n    info.wrapper.removeChild(this.node);\n    if (--info.panels == 0) removePanels(this.cm);\n  };\n\n  Panel.prototype.changed = function(height) {\n    var newHeight = height == null ? this.node.offsetHeight : height;\n    var info = this.cm.state.panels;\n    this.cm._setSize(null, info.height += (newHeight - this.height));\n    this.height = newHeight;\n  };\n\n  function initPanels(cm) {\n    var wrap = cm.getWrapperElement();\n    var style = window.getComputedStyle ? window.getComputedStyle(wrap) : wrap.currentStyle;\n    var height = parseInt(style.height);\n    var info = cm.state.panels = {\n      setHeight: wrap.style.height,\n      heightLeft: height,\n      panels: 0,\n      wrapper: document.createElement(\"div\")\n    };\n    wrap.parentNode.insertBefore(info.wrapper, wrap);\n    var hasFocus = cm.hasFocus();\n    info.wrapper.appendChild(wrap);\n    if (hasFocus) cm.focus();\n\n    cm._setSize = cm.setSize;\n    if (height != null) cm.setSize = function(width, newHeight) {\n      if (newHeight == null) return this._setSize(width, newHeight);\n      info.setHeight = newHeight;\n      if (typeof newHeight != \"number\") {\n        var px = /^(\\d+\\.?\\d*)px$/.exec(newHeight);\n        if (px) {\n          newHeight = Number(px[1]);\n        } else {\n          info.wrapper.style.height = newHeight;\n          newHeight = info.wrapper.offsetHeight;\n          info.wrapper.style.height = \"\";\n        }\n      }\n      cm._setSize(width, info.heightLeft += (newHeight - height));\n      height = newHeight;\n    };\n  }\n\n  function removePanels(cm) {\n    var info = cm.state.panels;\n    cm.state.panels = null;\n\n    var wrap = cm.getWrapperElement();\n    info.wrapper.parentNode.replaceChild(wrap, info.wrapper);\n    wrap.style.height = info.setHeight;\n    cm.setSize = cm._setSize;\n    cm.setSize();\n  }\n});\n"]}