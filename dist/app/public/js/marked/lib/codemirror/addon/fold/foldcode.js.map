{"version":3,"sources":["../../../../../../../../../app/public/js/marked/lib/codemirror/addon/fold/foldcode.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","doFold","cm","pos","options","force","call","finder","getOption","Pos","minSize","getRange","allowFolded","range","to","line","from","marks","findMarksAt","i","length","__isFold","cleared","clear","firstLine","myWidget","makeWidget","on","e","myRange","e_preventDefault","markText","replacedWith","clearOnEnter","signal","widget","text","document","createTextNode","createElement","appendChild","className","newFoldFunction","rangeFinder","defineExtension","commands","toggleFold","foldCode","getCursor","fold","unfold","foldAll","operation","lastLine","unfoldAll","registerHelper","funcs","Array","prototype","slice","arguments","start","found","helpers","getHelpers","cur","defaultOptions","auto","minFoldSize","scanUp","defineOption","name","undefined","editorOptions","foldOptions"],"mappings":"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","file":"foldcode.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function doFold(cm, pos, options, force) {\n    if (options && options.call) {\n      var finder = options;\n      options = null;\n    } else {\n      var finder = getOption(cm, options, \"rangeFinder\");\n    }\n    if (typeof pos == \"number\") pos = CodeMirror.Pos(pos, 0);\n    var minSize = getOption(cm, options, \"minFoldSize\");\n\n    function getRange(allowFolded) {\n      var range = finder(cm, pos);\n      if (!range || range.to.line - range.from.line < minSize) return null;\n      var marks = cm.findMarksAt(range.from);\n      for (var i = 0; i < marks.length; ++i) {\n        if (marks[i].__isFold && force !== \"fold\") {\n          if (!allowFolded) return null;\n          range.cleared = true;\n          marks[i].clear();\n        }\n      }\n      return range;\n    }\n\n    var range = getRange(true);\n    if (getOption(cm, options, \"scanUp\")) while (!range && pos.line > cm.firstLine()) {\n      pos = CodeMirror.Pos(pos.line - 1, 0);\n      range = getRange(false);\n    }\n    if (!range || range.cleared || force === \"unfold\") return;\n\n    var myWidget = makeWidget(cm, options);\n    CodeMirror.on(myWidget, \"mousedown\", function(e) {\n      myRange.clear();\n      CodeMirror.e_preventDefault(e);\n    });\n    var myRange = cm.markText(range.from, range.to, {\n      replacedWith: myWidget,\n      clearOnEnter: true,\n      __isFold: true\n    });\n    myRange.on(\"clear\", function(from, to) {\n      CodeMirror.signal(cm, \"unfold\", cm, from, to);\n    });\n    CodeMirror.signal(cm, \"fold\", cm, range.from, range.to);\n  }\n\n  function makeWidget(cm, options) {\n    var widget = getOption(cm, options, \"widget\");\n    if (typeof widget == \"string\") {\n      var text = document.createTextNode(widget);\n      widget = document.createElement(\"span\");\n      widget.appendChild(text);\n      widget.className = \"CodeMirror-foldmarker\";\n    }\n    return widget;\n  }\n\n  // Clumsy backwards-compatible interface\n  CodeMirror.newFoldFunction = function(rangeFinder, widget) {\n    return function(cm, pos) { doFold(cm, pos, {rangeFinder: rangeFinder, widget: widget}); };\n  };\n\n  // New-style interface\n  CodeMirror.defineExtension(\"foldCode\", function(pos, options, force) {\n    doFold(this, pos, options, force);\n  });\n\n  CodeMirror.defineExtension(\"isFolded\", function(pos) {\n    var marks = this.findMarksAt(pos);\n    for (var i = 0; i < marks.length; ++i)\n      if (marks[i].__isFold) return true;\n  });\n\n  CodeMirror.commands.toggleFold = function(cm) {\n    cm.foldCode(cm.getCursor());\n  };\n  CodeMirror.commands.fold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"fold\");\n  };\n  CodeMirror.commands.unfold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"unfold\");\n  };\n  CodeMirror.commands.foldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), null, \"fold\");\n    });\n  };\n  CodeMirror.commands.unfoldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), null, \"unfold\");\n    });\n  };\n\n  CodeMirror.registerHelper(\"fold\", \"combine\", function() {\n    var funcs = Array.prototype.slice.call(arguments, 0);\n    return function(cm, start) {\n      for (var i = 0; i < funcs.length; ++i) {\n        var found = funcs[i](cm, start);\n        if (found) return found;\n      }\n    };\n  });\n\n  CodeMirror.registerHelper(\"fold\", \"auto\", function(cm, start) {\n    var helpers = cm.getHelpers(start, \"fold\");\n    for (var i = 0; i < helpers.length; i++) {\n      var cur = helpers[i](cm, start);\n      if (cur) return cur;\n    }\n  });\n\n  var defaultOptions = {\n    rangeFinder: CodeMirror.fold.auto,\n    widget: \"\\u2194\",\n    minFoldSize: 0,\n    scanUp: false\n  };\n\n  CodeMirror.defineOption(\"foldOptions\", null);\n\n  function getOption(cm, options, name) {\n    if (options && options[name] !== undefined)\n      return options[name];\n    var editorOptions = cm.options.foldOptions;\n    if (editorOptions && editorOptions[name] !== undefined)\n      return editorOptions[name];\n    return defaultOptions[name];\n  }\n\n  CodeMirror.defineExtension(\"foldOption\", function(options, name) {\n    return getOption(this, options, name);\n  });\n});\n"]}