{"version":3,"sources":["../../../../../../../../../app/public/js/marked/lib/codemirror/addon/hint/javascript-hint.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","Pos","forEach","arr","f","i","e","length","arrayContains","item","Array","prototype","indexOf","scriptHint","editor","keywords","getToken","options","cur","getCursor","token","test","type","state","innerMode","getMode","string","start","ch","end","slice","tprop","line","context","push","list","getCompletions","from","to","javascriptHint","javascriptKeywords","getTokenAt","registerHelper","getCoffeeScriptToken","charAt","replace","coffeescriptHint","coffeescriptKeywords","stringProps","split","arrayProps","funcProps","found","global","globalScope","window","maybeAdd","str","lastIndexOf","gatherCompletions","obj","Function","name","pop","base","additionalContext","useGlobalScope","jQuery","_","v","localVars","next","globalVars"],"mappings":"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","file":"javascript-hint.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var Pos = CodeMirror.Pos;\n\n  function forEach(arr, f) {\n    for (var i = 0, e = arr.length; i < e; ++i) f(arr[i]);\n  }\n\n  function arrayContains(arr, item) {\n    if (!Array.prototype.indexOf) {\n      var i = arr.length;\n      while (i--) {\n        if (arr[i] === item) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return arr.indexOf(item) != -1;\n  }\n\n  function scriptHint(editor, keywords, getToken, options) {\n    // Find the token at the cursor\n    var cur = editor.getCursor(), token = getToken(editor, cur);\n    if (/\\b(?:string|comment)\\b/.test(token.type)) return;\n    token.state = CodeMirror.innerMode(editor.getMode(), token.state).state;\n\n    // If it's not a 'word-style' token, ignore the token.\n    if (!/^[\\w$_]*$/.test(token.string)) {\n      token = {start: cur.ch, end: cur.ch, string: \"\", state: token.state,\n               type: token.string == \".\" ? \"property\" : null};\n    } else if (token.end > cur.ch) {\n      token.end = cur.ch;\n      token.string = token.string.slice(0, cur.ch - token.start);\n    }\n\n    var tprop = token;\n    // If it is a property, find out what it is a property of.\n    while (tprop.type == \"property\") {\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (tprop.string != \".\") return;\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (!context) var context = [];\n      context.push(tprop);\n    }\n    return {list: getCompletions(token, context, keywords, options),\n            from: Pos(cur.line, token.start),\n            to: Pos(cur.line, token.end)};\n  }\n\n  function javascriptHint(editor, options) {\n    return scriptHint(editor, javascriptKeywords,\n                      function (e, cur) {return e.getTokenAt(cur);},\n                      options);\n  };\n  CodeMirror.registerHelper(\"hint\", \"javascript\", javascriptHint);\n\n  function getCoffeeScriptToken(editor, cur) {\n  // This getToken, it is for coffeescript, imitates the behavior of\n  // getTokenAt method in javascript.js, that is, returning \"property\"\n  // type and treat \".\" as indepenent token.\n    var token = editor.getTokenAt(cur);\n    if (cur.ch == token.start + 1 && token.string.charAt(0) == '.') {\n      token.end = token.start;\n      token.string = '.';\n      token.type = \"property\";\n    }\n    else if (/^\\.[\\w$_]*$/.test(token.string)) {\n      token.type = \"property\";\n      token.start++;\n      token.string = token.string.replace(/\\./, '');\n    }\n    return token;\n  }\n\n  function coffeescriptHint(editor, options) {\n    return scriptHint(editor, coffeescriptKeywords, getCoffeeScriptToken, options);\n  }\n  CodeMirror.registerHelper(\"hint\", \"coffeescript\", coffeescriptHint);\n\n  var stringProps = (\"charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight \" +\n                     \"toUpperCase toLowerCase split concat match replace search\").split(\" \");\n  var arrayProps = (\"length concat join splice push pop shift unshift slice reverse sort indexOf \" +\n                    \"lastIndexOf every some filter forEach map reduce reduceRight \").split(\" \");\n  var funcProps = \"prototype apply call bind\".split(\" \");\n  var javascriptKeywords = (\"break case catch continue debugger default delete do else false finally for function \" +\n                  \"if in instanceof new null return switch throw true try typeof var void while with\").split(\" \");\n  var coffeescriptKeywords = (\"and break catch class continue delete do else extends false finally for \" +\n                  \"if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes\").split(\" \");\n\n  function getCompletions(token, context, keywords, options) {\n    var found = [], start = token.string, global = options && options.globalScope || window;\n    function maybeAdd(str) {\n      if (str.lastIndexOf(start, 0) == 0 && !arrayContains(found, str)) found.push(str);\n    }\n    function gatherCompletions(obj) {\n      if (typeof obj == \"string\") forEach(stringProps, maybeAdd);\n      else if (obj instanceof Array) forEach(arrayProps, maybeAdd);\n      else if (obj instanceof Function) forEach(funcProps, maybeAdd);\n      for (var name in obj) maybeAdd(name);\n    }\n\n    if (context && context.length) {\n      // If this is a property, see if it belongs to some object we can\n      // find in the current environment.\n      var obj = context.pop(), base;\n      if (obj.type && obj.type.indexOf(\"variable\") === 0) {\n        if (options && options.additionalContext)\n          base = options.additionalContext[obj.string];\n        if (!options || options.useGlobalScope !== false)\n          base = base || global[obj.string];\n      } else if (obj.type == \"string\") {\n        base = \"\";\n      } else if (obj.type == \"atom\") {\n        base = 1;\n      } else if (obj.type == \"function\") {\n        if (global.jQuery != null && (obj.string == '$' || obj.string == 'jQuery') &&\n            (typeof global.jQuery == 'function'))\n          base = global.jQuery();\n        else if (global._ != null && (obj.string == '_') && (typeof global._ == 'function'))\n          base = global._();\n      }\n      while (base != null && context.length)\n        base = base[context.pop().string];\n      if (base != null) gatherCompletions(base);\n    } else {\n      // If not, just look in the global object and any local scope\n      // (reading into JS mode internals to get at the local and global variables)\n      for (var v = token.state.localVars; v; v = v.next) maybeAdd(v.name);\n      for (var v = token.state.globalVars; v; v = v.next) maybeAdd(v.name);\n      if (!options || options.useGlobalScope !== false)\n        gatherCompletions(global);\n      forEach(keywords, maybeAdd);\n    }\n    return found;\n  }\n});\n"]}