{"version":3,"sources":["../../../../../../../../../app/public/js/marked/lib/codemirror/addon/selection/selection-pointer.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","defineOption","cm","val","data","state","selectionPointer","off","getWrapperElement","mousemove","mouseout","window","windowScroll","reset","display","lineDiv","style","cursor","value","event","rects","mouseX","mouseY","willUpdate","on","buttons","which","clientX","clientY","scheduleUpdate","contains","relatedTarget","setTimeout","update","somethingSelected","sel","selectionDiv","firstChild","nextSibling","push","getBoundingClientRect","inside","i","length","rect","left","right","top","bottom"],"mappings":";;;;AAAA;AACA;;AAEA,CAAC,UAASA,GAAT,EAAc;AACb,MAAI,QAAOC,OAAP,yCAAOA,OAAP,MAAkB,QAAlB,IAA8B,QAAOC,MAAP,yCAAOA,MAAP,MAAiB,QAAnD,EAA6D;AAC3DF,QAAIG,QAAQ,sBAAR,CAAJ,EADF,KAEK,IAAI,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,OAAOC,GAA1C,EAA+C;AAClDD,WAAO,CAAC,sBAAD,CAAP,EAAiCJ,GAAjC,EADG,KAEA;AACHA,QAAIM,UAAJ;AACH,CAPD,EAOG,UAASA,UAAT,EAAqB;AACtB;;AAEAA,aAAWC,YAAX,CAAwB,kBAAxB,EAA4C,KAA5C,EAAmD,UAASC,EAAT,EAAaC,GAAb,EAAkB;AACnE,QAAIC,OAAOF,GAAGG,KAAH,CAASC,gBAApB;AACA,QAAIF,IAAJ,EAAU;AACRJ,iBAAWO,GAAX,CAAeL,GAAGM,iBAAH,EAAf,EAAuC,WAAvC,EAAoDJ,KAAKK,SAAzD;AACAT,iBAAWO,GAAX,CAAeL,GAAGM,iBAAH,EAAf,EAAuC,UAAvC,EAAmDJ,KAAKM,QAAxD;AACAV,iBAAWO,GAAX,CAAeI,MAAf,EAAuB,QAAvB,EAAiCP,KAAKQ,YAAtC;AACAV,SAAGK,GAAH,CAAO,gBAAP,EAAyBM,KAAzB;AACAX,SAAGK,GAAH,CAAO,QAAP,EAAiBM,KAAjB;AACAX,SAAGG,KAAH,CAASC,gBAAT,GAA4B,IAA5B;AACAJ,SAAGY,OAAH,CAAWC,OAAX,CAAmBC,KAAnB,CAAyBC,MAAzB,GAAkC,EAAlC;AACD;AACD,QAAId,GAAJ,EAAS;AACPC,aAAOF,GAAGG,KAAH,CAASC,gBAAT,GAA4B;AACjCY,eAAO,OAAOf,GAAP,IAAc,QAAd,GAAyBA,GAAzB,GAA+B,SADL;AAEjCM,mBAAW,mBAASU,KAAT,EAAgB;AAAEV,qBAAUP,EAAV,EAAciB,KAAd;AAAuB,SAFnB;AAGjCT,kBAAU,kBAASS,KAAT,EAAgB;AAAET,oBAASR,EAAT,EAAaiB,KAAb;AAAsB,SAHjB;AAIjCP,sBAAc,wBAAW;AAAEC,gBAAMX,EAAN;AAAY,SAJN;AAKjCkB,eAAO,IAL0B;AAMjCC,gBAAQ,IANyB,EAMnBC,QAAQ,IANW;AAOjCC,oBAAY;AAPqB,OAAnC;AASAvB,iBAAWwB,EAAX,CAActB,GAAGM,iBAAH,EAAd,EAAsC,WAAtC,EAAmDJ,KAAKK,SAAxD;AACAT,iBAAWwB,EAAX,CAActB,GAAGM,iBAAH,EAAd,EAAsC,UAAtC,EAAkDJ,KAAKM,QAAvD;AACAV,iBAAWwB,EAAX,CAAcb,MAAd,EAAsB,QAAtB,EAAgCP,KAAKQ,YAArC;AACAV,SAAGsB,EAAH,CAAM,gBAAN,EAAwBX,KAAxB;AACAX,SAAGsB,EAAH,CAAM,QAAN,EAAgBX,KAAhB;AACD;AACF,GA3BD;;AA6BA,WAASJ,UAAT,CAAmBP,EAAnB,EAAuBiB,KAAvB,EAA8B;AAC5B,QAAIf,OAAOF,GAAGG,KAAH,CAASC,gBAApB;AACA,QAAIa,MAAMM,OAAN,IAAiB,IAAjB,GAAwBN,MAAMO,KAA9B,GAAsCP,MAAMM,OAAhD,EAAyD;AACvDrB,WAAKiB,MAAL,GAAcjB,KAAKkB,MAAL,GAAc,IAA5B;AACD,KAFD,MAEO;AACLlB,WAAKiB,MAAL,GAAcF,MAAMQ,OAApB;AACAvB,WAAKkB,MAAL,GAAcH,MAAMS,OAApB;AACD;AACDC,mBAAe3B,EAAf;AACD;;AAED,WAASQ,SAAT,CAAkBR,EAAlB,EAAsBiB,KAAtB,EAA6B;AAC3B,QAAI,CAACjB,GAAGM,iBAAH,GAAuBsB,QAAvB,CAAgCX,MAAMY,aAAtC,CAAL,EAA2D;AACzD,UAAI3B,OAAOF,GAAGG,KAAH,CAASC,gBAApB;AACAF,WAAKiB,MAAL,GAAcjB,KAAKkB,MAAL,GAAc,IAA5B;AACAO,qBAAe3B,EAAf;AACD;AACF;;AAED,WAASW,KAAT,CAAeX,EAAf,EAAmB;AACjBA,OAAGG,KAAH,CAASC,gBAAT,CAA0Bc,KAA1B,GAAkC,IAAlC;AACAS,mBAAe3B,EAAf;AACD;;AAED,WAAS2B,cAAT,CAAwB3B,EAAxB,EAA4B;AAC1B,QAAI,CAACA,GAAGG,KAAH,CAASC,gBAAT,CAA0BiB,UAA/B,EAA2C;AACzCrB,SAAGG,KAAH,CAASC,gBAAT,CAA0BiB,UAA1B,GAAuC,IAAvC;AACAS,iBAAW,YAAW;AACpBC,eAAO/B,EAAP;AACAA,WAAGG,KAAH,CAASC,gBAAT,CAA0BiB,UAA1B,GAAuC,KAAvC;AACD,OAHD,EAGG,EAHH;AAID;AACF;;AAED,WAASU,MAAT,CAAgB/B,EAAhB,EAAoB;AAClB,QAAIE,OAAOF,GAAGG,KAAH,CAASC,gBAApB;AACA,QAAI,CAACF,IAAL,EAAW;AACX,QAAIA,KAAKgB,KAAL,IAAc,IAAd,IAAsBhB,KAAKiB,MAAL,IAAe,IAAzC,EAA+C;AAC7CjB,WAAKgB,KAAL,GAAa,EAAb;AACA,UAAIlB,GAAGgC,iBAAH,EAAJ,EAA4B;AAC1B,aAAK,IAAIC,MAAMjC,GAAGY,OAAH,CAAWsB,YAAX,CAAwBC,UAAvC,EAAmDF,GAAnD,EAAwDA,MAAMA,IAAIG,WAAlE;AACElC,eAAKgB,KAAL,CAAWmB,IAAX,CAAgBJ,IAAIK,qBAAJ,EAAhB;AADF;AAED;AACF;AACD,QAAIC,SAAS,KAAb;AACA,QAAIrC,KAAKiB,MAAL,IAAe,IAAnB,EAAyB,KAAK,IAAIqB,IAAI,CAAb,EAAgBA,IAAItC,KAAKgB,KAAL,CAAWuB,MAA/B,EAAuCD,GAAvC,EAA4C;AACnE,UAAIE,OAAOxC,KAAKgB,KAAL,CAAWsB,CAAX,CAAX;AACA,UAAIE,KAAKC,IAAL,IAAazC,KAAKiB,MAAlB,IAA4BuB,KAAKE,KAAL,IAAc1C,KAAKiB,MAA/C,IACAuB,KAAKG,GAAL,IAAY3C,KAAKkB,MADjB,IAC2BsB,KAAKI,MAAL,IAAe5C,KAAKkB,MADnD,EAEEmB,SAAS,IAAT;AACH;AACD,QAAIxB,SAASwB,SAASrC,KAAKc,KAAd,GAAsB,EAAnC;AACA,QAAIhB,GAAGY,OAAH,CAAWC,OAAX,CAAmBC,KAAnB,CAAyBC,MAAzB,IAAmCA,MAAvC,EACEf,GAAGY,OAAH,CAAWC,OAAX,CAAmBC,KAAnB,CAAyBC,MAAzB,GAAkCA,MAAlC;AACH;AACF,CA9FD","file":"selection-pointer.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"selectionPointer\", false, function(cm, val) {\n    var data = cm.state.selectionPointer;\n    if (data) {\n      CodeMirror.off(cm.getWrapperElement(), \"mousemove\", data.mousemove);\n      CodeMirror.off(cm.getWrapperElement(), \"mouseout\", data.mouseout);\n      CodeMirror.off(window, \"scroll\", data.windowScroll);\n      cm.off(\"cursorActivity\", reset);\n      cm.off(\"scroll\", reset);\n      cm.state.selectionPointer = null;\n      cm.display.lineDiv.style.cursor = \"\";\n    }\n    if (val) {\n      data = cm.state.selectionPointer = {\n        value: typeof val == \"string\" ? val : \"default\",\n        mousemove: function(event) { mousemove(cm, event); },\n        mouseout: function(event) { mouseout(cm, event); },\n        windowScroll: function() { reset(cm); },\n        rects: null,\n        mouseX: null, mouseY: null,\n        willUpdate: false\n      };\n      CodeMirror.on(cm.getWrapperElement(), \"mousemove\", data.mousemove);\n      CodeMirror.on(cm.getWrapperElement(), \"mouseout\", data.mouseout);\n      CodeMirror.on(window, \"scroll\", data.windowScroll);\n      cm.on(\"cursorActivity\", reset);\n      cm.on(\"scroll\", reset);\n    }\n  });\n\n  function mousemove(cm, event) {\n    var data = cm.state.selectionPointer;\n    if (event.buttons == null ? event.which : event.buttons) {\n      data.mouseX = data.mouseY = null;\n    } else {\n      data.mouseX = event.clientX;\n      data.mouseY = event.clientY;\n    }\n    scheduleUpdate(cm);\n  }\n\n  function mouseout(cm, event) {\n    if (!cm.getWrapperElement().contains(event.relatedTarget)) {\n      var data = cm.state.selectionPointer;\n      data.mouseX = data.mouseY = null;\n      scheduleUpdate(cm);\n    }\n  }\n\n  function reset(cm) {\n    cm.state.selectionPointer.rects = null;\n    scheduleUpdate(cm);\n  }\n\n  function scheduleUpdate(cm) {\n    if (!cm.state.selectionPointer.willUpdate) {\n      cm.state.selectionPointer.willUpdate = true;\n      setTimeout(function() {\n        update(cm);\n        cm.state.selectionPointer.willUpdate = false;\n      }, 50);\n    }\n  }\n\n  function update(cm) {\n    var data = cm.state.selectionPointer;\n    if (!data) return;\n    if (data.rects == null && data.mouseX != null) {\n      data.rects = [];\n      if (cm.somethingSelected()) {\n        for (var sel = cm.display.selectionDiv.firstChild; sel; sel = sel.nextSibling)\n          data.rects.push(sel.getBoundingClientRect());\n      }\n    }\n    var inside = false;\n    if (data.mouseX != null) for (var i = 0; i < data.rects.length; i++) {\n      var rect = data.rects[i];\n      if (rect.left <= data.mouseX && rect.right >= data.mouseX &&\n          rect.top <= data.mouseY && rect.bottom >= data.mouseY)\n        inside = true;\n    }\n    var cursor = inside ? data.value : \"\";\n    if (cm.display.lineDiv.style.cursor != cursor)\n      cm.display.lineDiv.style.cursor = cursor;\n  }\n});\n"]}