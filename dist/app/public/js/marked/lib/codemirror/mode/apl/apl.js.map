{"version":3,"sources":["../../../../../../../../../app/public/js/marked/lib/codemirror/mode/apl/apl.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","defineMode","builtInOps","builtInFuncs","isOperator","isNiladic","isFunction","isArrow","isComment","stringEater","type","prev","c","startState","func","op","string","escape","token","stream","state","ch","funcName","word","eatSpace","next","eatWhile","test","skipToEnd","peek","current","defineMIME"],"mappings":"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","file":"apl.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"apl\", function() {\n  var builtInOps = {\n    \".\": \"innerProduct\",\n    \"\\\\\": \"scan\",\n    \"/\": \"reduce\",\n    \"⌿\": \"reduce1Axis\",\n    \"⍀\": \"scan1Axis\",\n    \"¨\": \"each\",\n    \"⍣\": \"power\"\n  };\n  var builtInFuncs = {\n    \"+\": [\"conjugate\", \"add\"],\n    \"−\": [\"negate\", \"subtract\"],\n    \"×\": [\"signOf\", \"multiply\"],\n    \"÷\": [\"reciprocal\", \"divide\"],\n    \"⌈\": [\"ceiling\", \"greaterOf\"],\n    \"⌊\": [\"floor\", \"lesserOf\"],\n    \"∣\": [\"absolute\", \"residue\"],\n    \"⍳\": [\"indexGenerate\", \"indexOf\"],\n    \"?\": [\"roll\", \"deal\"],\n    \"⋆\": [\"exponentiate\", \"toThePowerOf\"],\n    \"⍟\": [\"naturalLog\", \"logToTheBase\"],\n    \"○\": [\"piTimes\", \"circularFuncs\"],\n    \"!\": [\"factorial\", \"binomial\"],\n    \"⌹\": [\"matrixInverse\", \"matrixDivide\"],\n    \"<\": [null, \"lessThan\"],\n    \"≤\": [null, \"lessThanOrEqual\"],\n    \"=\": [null, \"equals\"],\n    \">\": [null, \"greaterThan\"],\n    \"≥\": [null, \"greaterThanOrEqual\"],\n    \"≠\": [null, \"notEqual\"],\n    \"≡\": [\"depth\", \"match\"],\n    \"≢\": [null, \"notMatch\"],\n    \"∈\": [\"enlist\", \"membership\"],\n    \"⍷\": [null, \"find\"],\n    \"∪\": [\"unique\", \"union\"],\n    \"∩\": [null, \"intersection\"],\n    \"∼\": [\"not\", \"without\"],\n    \"∨\": [null, \"or\"],\n    \"∧\": [null, \"and\"],\n    \"⍱\": [null, \"nor\"],\n    \"⍲\": [null, \"nand\"],\n    \"⍴\": [\"shapeOf\", \"reshape\"],\n    \",\": [\"ravel\", \"catenate\"],\n    \"⍪\": [null, \"firstAxisCatenate\"],\n    \"⌽\": [\"reverse\", \"rotate\"],\n    \"⊖\": [\"axis1Reverse\", \"axis1Rotate\"],\n    \"⍉\": [\"transpose\", null],\n    \"↑\": [\"first\", \"take\"],\n    \"↓\": [null, \"drop\"],\n    \"⊂\": [\"enclose\", \"partitionWithAxis\"],\n    \"⊃\": [\"diclose\", \"pick\"],\n    \"⌷\": [null, \"index\"],\n    \"⍋\": [\"gradeUp\", null],\n    \"⍒\": [\"gradeDown\", null],\n    \"⊤\": [\"encode\", null],\n    \"⊥\": [\"decode\", null],\n    \"⍕\": [\"format\", \"formatByExample\"],\n    \"⍎\": [\"execute\", null],\n    \"⊣\": [\"stop\", \"left\"],\n    \"⊢\": [\"pass\", \"right\"]\n  };\n\n  var isOperator = /[\\.\\/⌿⍀¨⍣]/;\n  var isNiladic = /⍬/;\n  var isFunction = /[\\+−×÷⌈⌊∣⍳\\?⋆⍟○!⌹<≤=>≥≠≡≢∈⍷∪∩∼∨∧⍱⍲⍴,⍪⌽⊖⍉↑↓⊂⊃⌷⍋⍒⊤⊥⍕⍎⊣⊢]/;\n  var isArrow = /←/;\n  var isComment = /[⍝#].*$/;\n\n  var stringEater = function(type) {\n    var prev;\n    prev = false;\n    return function(c) {\n      prev = c;\n      if (c === type) {\n        return prev === \"\\\\\";\n      }\n      return true;\n    };\n  };\n  return {\n    startState: function() {\n      return {\n        prev: false,\n        func: false,\n        op: false,\n        string: false,\n        escape: false\n      };\n    },\n    token: function(stream, state) {\n      var ch, funcName, word;\n      if (stream.eatSpace()) {\n        return null;\n      }\n      ch = stream.next();\n      if (ch === '\"' || ch === \"'\") {\n        stream.eatWhile(stringEater(ch));\n        stream.next();\n        state.prev = true;\n        return \"string\";\n      }\n      if (/[\\[{\\(]/.test(ch)) {\n        state.prev = false;\n        return null;\n      }\n      if (/[\\]}\\)]/.test(ch)) {\n        state.prev = true;\n        return null;\n      }\n      if (isNiladic.test(ch)) {\n        state.prev = false;\n        return \"niladic\";\n      }\n      if (/[¯\\d]/.test(ch)) {\n        if (state.func) {\n          state.func = false;\n          state.prev = false;\n        } else {\n          state.prev = true;\n        }\n        stream.eatWhile(/[\\w\\.]/);\n        return \"number\";\n      }\n      if (isOperator.test(ch)) {\n        return \"operator apl-\" + builtInOps[ch];\n      }\n      if (isArrow.test(ch)) {\n        return \"apl-arrow\";\n      }\n      if (isFunction.test(ch)) {\n        funcName = \"apl-\";\n        if (builtInFuncs[ch] != null) {\n          if (state.prev) {\n            funcName += builtInFuncs[ch][1];\n          } else {\n            funcName += builtInFuncs[ch][0];\n          }\n        }\n        state.func = true;\n        state.prev = false;\n        return \"function \" + funcName;\n      }\n      if (isComment.test(ch)) {\n        stream.skipToEnd();\n        return \"comment\";\n      }\n      if (ch === \"∘\" && stream.peek() === \".\") {\n        stream.next();\n        return \"function jot-dot\";\n      }\n      stream.eatWhile(/[\\w\\$_]/);\n      word = stream.current();\n      state.prev = true;\n      return \"keyword\";\n    }\n  };\n});\n\nCodeMirror.defineMIME(\"text/apl\", \"apl\");\n\n});\n"]}