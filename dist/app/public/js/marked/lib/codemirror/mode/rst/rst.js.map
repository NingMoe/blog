{"version":3,"sources":["../../../../../../../../../app/public/js/marked/lib/codemirror/mode/rst/rst.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","defineMode","config","options","rx_strong","rx_emphasis","rx_literal","rx_number","rx_positive","rx_negative","rx_uri_protocol","rx_uri_domain","rx_uri_path","rx_uri","RegExp","overlay","token","stream","match","next","mode","getMode","backdrop","overlayMode","format","string","args","Array","prototype","slice","call","arguments","replace","n","mode_python","mode_stex","SEPA","TAIL","rx_TAIL","NAME","rx_NAME","NAME_WWS","REF_NAME","TEXT1","TEXT2","rx_TEXT2","rx_section","rx_explicit","rx_link","rx_directive","rx_substitution","rx_footnote","rx_citation","rx_substitution_ref","rx_footnote_ref","rx_citation_ref","rx_link_ref1","rx_link_ref2","rx_role_pre","rx_role_suf","rx_role","rx_directive_name","rx_directive_tail","rx_substitution_text","rx_substitution_sepa","rx_substitution_name","rx_substitution_tail","rx_link_head","rx_link_name","rx_link_tail","rx_verbatim","rx_examples","to_normal","state","sol","change","to_mode","local","startState","to_explicit","phase","stage","context","current","tmp_stex","undefined","tmp","peek","to_verbatim","tmp_py","eatSpace","eol","skipToEnd","to_comment","as_block","ctx","tok","copyState","innerMode","defineMIME"],"mappings":"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","file":"rst.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../python/python\"), require(\"../stex/stex\"), require(\"../../addon/mode/overlay\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../python/python\", \"../stex/stex\", \"../../addon/mode/overlay\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode('rst', function (config, options) {\n\n  var rx_strong = /^\\*\\*[^\\*\\s](?:[^\\*]*[^\\*\\s])?\\*\\*/;\n  var rx_emphasis = /^\\*[^\\*\\s](?:[^\\*]*[^\\*\\s])?\\*/;\n  var rx_literal = /^``[^`\\s](?:[^`]*[^`\\s])``/;\n\n  var rx_number = /^(?:[\\d]+(?:[\\.,]\\d+)*)/;\n  var rx_positive = /^(?:\\s\\+[\\d]+(?:[\\.,]\\d+)*)/;\n  var rx_negative = /^(?:\\s\\-[\\d]+(?:[\\.,]\\d+)*)/;\n\n  var rx_uri_protocol = \"[Hh][Tt][Tt][Pp][Ss]?://\";\n  var rx_uri_domain = \"(?:[\\\\d\\\\w.-]+)\\\\.(?:\\\\w{2,6})\";\n  var rx_uri_path = \"(?:/[\\\\d\\\\w\\\\#\\\\%\\\\&\\\\-\\\\.\\\\,\\\\/\\\\:\\\\=\\\\?\\\\~]+)*\";\n  var rx_uri = new RegExp(\"^\" + rx_uri_protocol + rx_uri_domain + rx_uri_path);\n\n  var overlay = {\n    token: function (stream) {\n\n      if (stream.match(rx_strong) && stream.match (/\\W+|$/, false))\n        return 'strong';\n      if (stream.match(rx_emphasis) && stream.match (/\\W+|$/, false))\n        return 'em';\n      if (stream.match(rx_literal) && stream.match (/\\W+|$/, false))\n        return 'string-2';\n      if (stream.match(rx_number))\n        return 'number';\n      if (stream.match(rx_positive))\n        return 'positive';\n      if (stream.match(rx_negative))\n        return 'negative';\n      if (stream.match(rx_uri))\n        return 'link';\n\n      while (stream.next() != null) {\n        if (stream.match(rx_strong, false)) break;\n        if (stream.match(rx_emphasis, false)) break;\n        if (stream.match(rx_literal, false)) break;\n        if (stream.match(rx_number, false)) break;\n        if (stream.match(rx_positive, false)) break;\n        if (stream.match(rx_negative, false)) break;\n        if (stream.match(rx_uri, false)) break;\n      }\n\n      return null;\n    }\n  };\n\n  var mode = CodeMirror.getMode(\n    config, options.backdrop || 'rst-base'\n  );\n\n  return CodeMirror.overlayMode(mode, overlay, true); // combine\n}, 'python', 'stex');\n\n///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nCodeMirror.defineMode('rst-base', function (config) {\n\n  ///////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////\n\n  function format(string) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return string.replace(/{(\\d+)}/g, function (match, n) {\n      return typeof args[n] != 'undefined' ? args[n] : match;\n    });\n  }\n\n  ///////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////\n\n  var mode_python = CodeMirror.getMode(config, 'python');\n  var mode_stex = CodeMirror.getMode(config, 'stex');\n\n  ///////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////\n\n  var SEPA = \"\\\\s+\";\n  var TAIL = \"(?:\\\\s*|\\\\W|$)\",\n  rx_TAIL = new RegExp(format('^{0}', TAIL));\n\n  var NAME =\n    \"(?:[^\\\\W\\\\d_](?:[\\\\w!\\\"#$%&'()\\\\*\\\\+,\\\\-\\\\.\\/:;<=>\\\\?]*[^\\\\W_])?)\",\n  rx_NAME = new RegExp(format('^{0}', NAME));\n  var NAME_WWS =\n    \"(?:[^\\\\W\\\\d_](?:[\\\\w\\\\s!\\\"#$%&'()\\\\*\\\\+,\\\\-\\\\.\\/:;<=>\\\\?]*[^\\\\W_])?)\";\n  var REF_NAME = format('(?:{0}|`{1}`)', NAME, NAME_WWS);\n\n  var TEXT1 = \"(?:[^\\\\s\\\\|](?:[^\\\\|]*[^\\\\s\\\\|])?)\";\n  var TEXT2 = \"(?:[^\\\\`]+)\",\n  rx_TEXT2 = new RegExp(format('^{0}', TEXT2));\n\n  var rx_section = new RegExp(\n    \"^([!'#$%&\\\"()*+,-./:;<=>?@\\\\[\\\\\\\\\\\\]^_`{|}~])\\\\1{3,}\\\\s*$\");\n  var rx_explicit = new RegExp(\n    format('^\\\\.\\\\.{0}', SEPA));\n  var rx_link = new RegExp(\n    format('^_{0}:{1}|^__:{1}', REF_NAME, TAIL));\n  var rx_directive = new RegExp(\n    format('^{0}::{1}', REF_NAME, TAIL));\n  var rx_substitution = new RegExp(\n    format('^\\\\|{0}\\\\|{1}{2}::{3}', TEXT1, SEPA, REF_NAME, TAIL));\n  var rx_footnote = new RegExp(\n    format('^\\\\[(?:\\\\d+|#{0}?|\\\\*)]{1}', REF_NAME, TAIL));\n  var rx_citation = new RegExp(\n    format('^\\\\[{0}\\\\]{1}', REF_NAME, TAIL));\n\n  var rx_substitution_ref = new RegExp(\n    format('^\\\\|{0}\\\\|', TEXT1));\n  var rx_footnote_ref = new RegExp(\n    format('^\\\\[(?:\\\\d+|#{0}?|\\\\*)]_', REF_NAME));\n  var rx_citation_ref = new RegExp(\n    format('^\\\\[{0}\\\\]_', REF_NAME));\n  var rx_link_ref1 = new RegExp(\n    format('^{0}__?', REF_NAME));\n  var rx_link_ref2 = new RegExp(\n    format('^`{0}`_', TEXT2));\n\n  var rx_role_pre = new RegExp(\n    format('^:{0}:`{1}`{2}', NAME, TEXT2, TAIL));\n  var rx_role_suf = new RegExp(\n    format('^`{1}`:{0}:{2}', NAME, TEXT2, TAIL));\n  var rx_role = new RegExp(\n    format('^:{0}:{1}', NAME, TAIL));\n\n  var rx_directive_name = new RegExp(format('^{0}', REF_NAME));\n  var rx_directive_tail = new RegExp(format('^::{0}', TAIL));\n  var rx_substitution_text = new RegExp(format('^\\\\|{0}\\\\|', TEXT1));\n  var rx_substitution_sepa = new RegExp(format('^{0}', SEPA));\n  var rx_substitution_name = new RegExp(format('^{0}', REF_NAME));\n  var rx_substitution_tail = new RegExp(format('^::{0}', TAIL));\n  var rx_link_head = new RegExp(\"^_\");\n  var rx_link_name = new RegExp(format('^{0}|_', REF_NAME));\n  var rx_link_tail = new RegExp(format('^:{0}', TAIL));\n\n  var rx_verbatim = new RegExp('^::\\\\s*$');\n  var rx_examples = new RegExp('^\\\\s+(?:>>>|In \\\\[\\\\d+\\\\]:)\\\\s');\n\n  ///////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////\n\n  function to_normal(stream, state) {\n    var token = null;\n\n    if (stream.sol() && stream.match(rx_examples, false)) {\n      change(state, to_mode, {\n        mode: mode_python, local: CodeMirror.startState(mode_python)\n      });\n    } else if (stream.sol() && stream.match(rx_explicit)) {\n      change(state, to_explicit);\n      token = 'meta';\n    } else if (stream.sol() && stream.match(rx_section)) {\n      change(state, to_normal);\n      token = 'header';\n    } else if (phase(state) == rx_role_pre ||\n               stream.match(rx_role_pre, false)) {\n\n      switch (stage(state)) {\n      case 0:\n        change(state, to_normal, context(rx_role_pre, 1));\n        stream.match(/^:/);\n        token = 'meta';\n        break;\n      case 1:\n        change(state, to_normal, context(rx_role_pre, 2));\n        stream.match(rx_NAME);\n        token = 'keyword';\n\n        if (stream.current().match(/^(?:math|latex)/)) {\n          state.tmp_stex = true;\n        }\n        break;\n      case 2:\n        change(state, to_normal, context(rx_role_pre, 3));\n        stream.match(/^:`/);\n        token = 'meta';\n        break;\n      case 3:\n        if (state.tmp_stex) {\n          state.tmp_stex = undefined; state.tmp = {\n            mode: mode_stex, local: CodeMirror.startState(mode_stex)\n          };\n        }\n\n        if (state.tmp) {\n          if (stream.peek() == '`') {\n            change(state, to_normal, context(rx_role_pre, 4));\n            state.tmp = undefined;\n            break;\n          }\n\n          token = state.tmp.mode.token(stream, state.tmp.local);\n          break;\n        }\n\n        change(state, to_normal, context(rx_role_pre, 4));\n        stream.match(rx_TEXT2);\n        token = 'string';\n        break;\n      case 4:\n        change(state, to_normal, context(rx_role_pre, 5));\n        stream.match(/^`/);\n        token = 'meta';\n        break;\n      case 5:\n        change(state, to_normal, context(rx_role_pre, 6));\n        stream.match(rx_TAIL);\n        break;\n      default:\n        change(state, to_normal);\n      }\n    } else if (phase(state) == rx_role_suf ||\n               stream.match(rx_role_suf, false)) {\n\n      switch (stage(state)) {\n      case 0:\n        change(state, to_normal, context(rx_role_suf, 1));\n        stream.match(/^`/);\n        token = 'meta';\n        break;\n      case 1:\n        change(state, to_normal, context(rx_role_suf, 2));\n        stream.match(rx_TEXT2);\n        token = 'string';\n        break;\n      case 2:\n        change(state, to_normal, context(rx_role_suf, 3));\n        stream.match(/^`:/);\n        token = 'meta';\n        break;\n      case 3:\n        change(state, to_normal, context(rx_role_suf, 4));\n        stream.match(rx_NAME);\n        token = 'keyword';\n        break;\n      case 4:\n        change(state, to_normal, context(rx_role_suf, 5));\n        stream.match(/^:/);\n        token = 'meta';\n        break;\n      case 5:\n        change(state, to_normal, context(rx_role_suf, 6));\n        stream.match(rx_TAIL);\n        break;\n      default:\n        change(state, to_normal);\n      }\n    } else if (phase(state) == rx_role || stream.match(rx_role, false)) {\n\n      switch (stage(state)) {\n      case 0:\n        change(state, to_normal, context(rx_role, 1));\n        stream.match(/^:/);\n        token = 'meta';\n        break;\n      case 1:\n        change(state, to_normal, context(rx_role, 2));\n        stream.match(rx_NAME);\n        token = 'keyword';\n        break;\n      case 2:\n        change(state, to_normal, context(rx_role, 3));\n        stream.match(/^:/);\n        token = 'meta';\n        break;\n      case 3:\n        change(state, to_normal, context(rx_role, 4));\n        stream.match(rx_TAIL);\n        break;\n      default:\n        change(state, to_normal);\n      }\n    } else if (phase(state) == rx_substitution_ref ||\n               stream.match(rx_substitution_ref, false)) {\n\n      switch (stage(state)) {\n      case 0:\n        change(state, to_normal, context(rx_substitution_ref, 1));\n        stream.match(rx_substitution_text);\n        token = 'variable-2';\n        break;\n      case 1:\n        change(state, to_normal, context(rx_substitution_ref, 2));\n        if (stream.match(/^_?_?/)) token = 'link';\n        break;\n      default:\n        change(state, to_normal);\n      }\n    } else if (stream.match(rx_footnote_ref)) {\n      change(state, to_normal);\n      token = 'quote';\n    } else if (stream.match(rx_citation_ref)) {\n      change(state, to_normal);\n      token = 'quote';\n    } else if (stream.match(rx_link_ref1)) {\n      change(state, to_normal);\n      if (!stream.peek() || stream.peek().match(/^\\W$/)) {\n        token = 'link';\n      }\n    } else if (phase(state) == rx_link_ref2 ||\n               stream.match(rx_link_ref2, false)) {\n\n      switch (stage(state)) {\n      case 0:\n        if (!stream.peek() || stream.peek().match(/^\\W$/)) {\n          change(state, to_normal, context(rx_link_ref2, 1));\n        } else {\n          stream.match(rx_link_ref2);\n        }\n        break;\n      case 1:\n        change(state, to_normal, context(rx_link_ref2, 2));\n        stream.match(/^`/);\n        token = 'link';\n        break;\n      case 2:\n        change(state, to_normal, context(rx_link_ref2, 3));\n        stream.match(rx_TEXT2);\n        break;\n      case 3:\n        change(state, to_normal, context(rx_link_ref2, 4));\n        stream.match(/^`_/);\n        token = 'link';\n        break;\n      default:\n        change(state, to_normal);\n      }\n    } else if (stream.match(rx_verbatim)) {\n      change(state, to_verbatim);\n    }\n\n    else {\n      if (stream.next()) change(state, to_normal);\n    }\n\n    return token;\n  }\n\n  ///////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////\n\n  function to_explicit(stream, state) {\n    var token = null;\n\n    if (phase(state) == rx_substitution ||\n        stream.match(rx_substitution, false)) {\n\n      switch (stage(state)) {\n      case 0:\n        change(state, to_explicit, context(rx_substitution, 1));\n        stream.match(rx_substitution_text);\n        token = 'variable-2';\n        break;\n      case 1:\n        change(state, to_explicit, context(rx_substitution, 2));\n        stream.match(rx_substitution_sepa);\n        break;\n      case 2:\n        change(state, to_explicit, context(rx_substitution, 3));\n        stream.match(rx_substitution_name);\n        token = 'keyword';\n        break;\n      case 3:\n        change(state, to_explicit, context(rx_substitution, 4));\n        stream.match(rx_substitution_tail);\n        token = 'meta';\n        break;\n      default:\n        change(state, to_normal);\n      }\n    } else if (phase(state) == rx_directive ||\n               stream.match(rx_directive, false)) {\n\n      switch (stage(state)) {\n      case 0:\n        change(state, to_explicit, context(rx_directive, 1));\n        stream.match(rx_directive_name);\n        token = 'keyword';\n\n        if (stream.current().match(/^(?:math|latex)/))\n          state.tmp_stex = true;\n        else if (stream.current().match(/^python/))\n          state.tmp_py = true;\n        break;\n      case 1:\n        change(state, to_explicit, context(rx_directive, 2));\n        stream.match(rx_directive_tail);\n        token = 'meta';\n\n        if (stream.match(/^latex\\s*$/) || state.tmp_stex) {\n          state.tmp_stex = undefined; change(state, to_mode, {\n            mode: mode_stex, local: CodeMirror.startState(mode_stex)\n          });\n        }\n        break;\n      case 2:\n        change(state, to_explicit, context(rx_directive, 3));\n        if (stream.match(/^python\\s*$/) || state.tmp_py) {\n          state.tmp_py = undefined; change(state, to_mode, {\n            mode: mode_python, local: CodeMirror.startState(mode_python)\n          });\n        }\n        break;\n      default:\n        change(state, to_normal);\n      }\n    } else if (phase(state) == rx_link || stream.match(rx_link, false)) {\n\n      switch (stage(state)) {\n      case 0:\n        change(state, to_explicit, context(rx_link, 1));\n        stream.match(rx_link_head);\n        stream.match(rx_link_name);\n        token = 'link';\n        break;\n      case 1:\n        change(state, to_explicit, context(rx_link, 2));\n        stream.match(rx_link_tail);\n        token = 'meta';\n        break;\n      default:\n        change(state, to_normal);\n      }\n    } else if (stream.match(rx_footnote)) {\n      change(state, to_normal);\n      token = 'quote';\n    } else if (stream.match(rx_citation)) {\n      change(state, to_normal);\n      token = 'quote';\n    }\n\n    else {\n      stream.eatSpace();\n      if (stream.eol()) {\n        change(state, to_normal);\n      } else {\n        stream.skipToEnd();\n        change(state, to_comment);\n        token = 'comment';\n      }\n    }\n\n    return token;\n  }\n\n  ///////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////\n\n  function to_comment(stream, state) {\n    return as_block(stream, state, 'comment');\n  }\n\n  function to_verbatim(stream, state) {\n    return as_block(stream, state, 'meta');\n  }\n\n  function as_block(stream, state, token) {\n    if (stream.eol() || stream.eatSpace()) {\n      stream.skipToEnd();\n      return token;\n    } else {\n      change(state, to_normal);\n      return null;\n    }\n  }\n\n  ///////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////\n\n  function to_mode(stream, state) {\n\n    if (state.ctx.mode && state.ctx.local) {\n\n      if (stream.sol()) {\n        if (!stream.eatSpace()) change(state, to_normal);\n        return null;\n      }\n\n      return state.ctx.mode.token(stream, state.ctx.local);\n    }\n\n    change(state, to_normal);\n    return null;\n  }\n\n  ///////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////\n\n  function context(phase, stage, mode, local) {\n    return {phase: phase, stage: stage, mode: mode, local: local};\n  }\n\n  function change(state, tok, ctx) {\n    state.tok = tok;\n    state.ctx = ctx || {};\n  }\n\n  function stage(state) {\n    return state.ctx.stage || 0;\n  }\n\n  function phase(state) {\n    return state.ctx.phase;\n  }\n\n  ///////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////\n\n  return {\n    startState: function () {\n      return {tok: to_normal, ctx: context(undefined, 0)};\n    },\n\n    copyState: function (state) {\n      var ctx = state.ctx, tmp = state.tmp;\n      if (ctx.local)\n        ctx = {mode: ctx.mode, local: CodeMirror.copyState(ctx.mode, ctx.local)};\n      if (tmp)\n        tmp = {mode: tmp.mode, local: CodeMirror.copyState(tmp.mode, tmp.local)};\n      return {tok: state.tok, ctx: ctx, tmp: tmp};\n    },\n\n    innerMode: function (state) {\n      return state.tmp      ? {state: state.tmp.local, mode: state.tmp.mode}\n      : state.ctx.mode ? {state: state.ctx.local, mode: state.ctx.mode}\n      : null;\n    },\n\n    token: function (stream, state) {\n      return state.tok(stream, state);\n    }\n  };\n}, 'python', 'stex');\n\n///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nCodeMirror.defineMIME('text/x-rst', 'rst');\n\n///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\n});\n"]}