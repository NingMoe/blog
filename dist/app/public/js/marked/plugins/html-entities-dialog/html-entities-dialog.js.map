{"version":3,"sources":["../../../../../../../app/public/js/marked/plugins/html-entities-dialog/html-entities-dialog.js"],"names":["factory","exports","$","jQuery","pluginName","selecteds","entitiesData","fn","htmlEntitiesDialog","_this","cm","lang","settings","path","pluginPath","editor","cursor","getCursor","selection","getSelection","classPrefix","dialogName","dialog","dialogLang","htmlEntities","dialogContent","join","focus","find","length","removeClass","dialogShowMask","dialogLockScreen","show","createDialog","name","title","width","height","mask","drag","dialogDraggable","content","lockScreen","maskStyle","opacity","dialogMaskOpacity","backgroundColor","dialogMaskBgColor","buttons","enter","replaceSelection","hide","hideMask","cancel","table","drawTable","rowNumber","pageTotal","Math","ceil","html","i","row","x","entity","replace","append","bind","mouseOrTouch","toggleClass","hasClass","push","attr","loading","getJSON","json","require","module","define","amd","editormd","window"],"mappings":"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","file":"html-entities-dialog.js","sourcesContent":["/*!\r\n * HTML entities dialog plugin for Editor.md\r\n *\r\n * @file        html-entities-dialog.js\r\n * @author      pandao\r\n * @version     1.2.0\r\n * @updateTime  2015-03-08\r\n * {@link       https://github.com/pandao/editor.md}\r\n * @license     MIT\r\n */\r\n\r\n(function() {\r\n\r\n\tvar factory = function (exports) {\r\n\r\n\t\tvar $            = jQuery;\r\n\t\tvar pluginName   = \"html-entities-dialog\";\r\n\t\tvar selecteds    = [];\r\n\t\tvar entitiesData = [];\r\n\r\n\t\texports.fn.htmlEntitiesDialog = function() {\r\n\t\t\tvar _this       = this;\r\n\t\t\tvar cm          = this.cm;\r\n\t\t\tvar lang        = _this.lang;\r\n\t\t\tvar settings    = _this.settings;\r\n\t\t\tvar path        = settings.pluginPath + pluginName + \"/\";\r\n\t\t\tvar editor      = this.editor;\r\n\t\t\tvar cursor      = cm.getCursor();\r\n\t\t\tvar selection   = cm.getSelection();\r\n\t\t\tvar classPrefix = _this.classPrefix;\r\n\r\n\t\t\tvar dialogName  = classPrefix + \"dialog-\" + pluginName, dialog;\r\n\t\t\tvar dialogLang  = lang.dialog.htmlEntities;\r\n\r\n\t\t\tvar dialogContent = [\r\n\t\t\t\t'<div class=\"' + classPrefix + 'html-entities-box\" style=\\\"width: 760px;height: 334px;margin-bottom: 8px;overflow: hidden;overflow-y: auto;\\\">',\r\n\t\t\t\t'<div class=\"' + classPrefix + 'grid-table\">',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'</div>',\r\n\t\t\t].join(\"\\r\\n\");\r\n\r\n\t\t\tcm.focus();\r\n\r\n\t\t\tif (editor.find(\".\" + dialogName).length > 0) \r\n\t\t\t{\r\n                dialog = editor.find(\".\" + dialogName);\r\n\r\n\t\t\t\tselecteds = [];\r\n\t\t\t\tdialog.find(\"a\").removeClass(\"selected\");\r\n\r\n\t\t\t\tthis.dialogShowMask(dialog);\r\n\t\t\t\tthis.dialogLockScreen();\r\n\t\t\t\tdialog.show();\r\n\t\t\t} \r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdialog = this.createDialog({\r\n\t\t\t\t\tname       : dialogName,\r\n\t\t\t\t\ttitle      : dialogLang.title,\r\n\t\t\t\t\twidth      : 800,\r\n\t\t\t\t\theight     : 475,\r\n\t\t\t\t\tmask       : settings.dialogShowMask,\r\n\t\t\t\t\tdrag       : settings.dialogDraggable,\r\n\t\t\t\t\tcontent    : dialogContent,\r\n\t\t\t\t\tlockScreen : settings.dialogLockScreen,\r\n\t\t\t\t\tmaskStyle  : {\r\n\t\t\t\t\t\topacity         : settings.dialogMaskOpacity,\r\n\t\t\t\t\t\tbackgroundColor : settings.dialogMaskBgColor\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbuttons    : {\r\n\t\t\t\t\t\tenter  : [lang.buttons.enter, function() {\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcm.replaceSelection(selecteds.join(\" \"));\r\n\t\t\t\t\t\t\tthis.hide().lockScreen(false).hideMask();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tcancel : [lang.buttons.cancel, function() {                           \r\n\t\t\t\t\t\t\tthis.hide().lockScreen(false).hideMask();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tvar table = dialog.find(\".\" + classPrefix + \"grid-table\");\r\n\r\n\t\t\tvar drawTable = function() {\r\n\r\n\t\t\t\tif (entitiesData.length < 1) return ;\r\n\r\n\t\t\t\tvar rowNumber = 20;\r\n\t\t\t\tvar pageTotal = Math.ceil(entitiesData.length / rowNumber);\r\n\r\n\t\t\t\ttable.html(\"\");\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < pageTotal; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar row = \"<div class=\\\"\" + classPrefix + \"grid-table-row\\\">\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var x = 0; x < rowNumber; x++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar entity = entitiesData[(i * rowNumber) + x];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (typeof entity !== \"undefined\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar name = entity.name.replace(\"&amp;\", \"&\");\r\n\r\n\t\t\t\t\t\t\trow += \"<a href=\\\"javascript:;\\\" value=\\\"\" + entity.name + \"\\\" title=\\\"\" + name + \"\\\" class=\\\"\" + classPrefix + \"html-entity-btn\\\">\" + name + \"</a>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\trow += \"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\ttable.append(row);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdialog.find(\".\" + classPrefix + \"html-entity-btn\").bind(exports.mouseOrTouch(\"click\", \"touchend\"), function() {\r\n\t\t\t\t\t$(this).toggleClass(\"selected\");\r\n\r\n\t\t\t\t\tif ($(this).hasClass(\"selected\")) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tselecteds.push($(this).attr(\"value\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (entitiesData.length < 1) \r\n\t\t\t{            \r\n\t\t\t\tif (typeof (dialog.loading) == \"function\") dialog.loading(true);\r\n\r\n\t\t\t\t$.getJSON(path + pluginName.replace(\"-dialog\", \"\") + \".json\", function(json) {\r\n\r\n\t\t\t\t\tif (typeof (dialog.loading) == \"function\") dialog.loading(false);\r\n\r\n\t\t\t\t\tentitiesData = json;\r\n\t\t\t\t\tdrawTable();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\t\t\r\n\t\t\t\tdrawTable();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t};\r\n    \r\n\t// CommonJS/Node.js\r\n\tif (typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\")\r\n    { \r\n        module.exports = factory;\r\n    }\r\n\telse if (typeof define === \"function\")  // AMD/CMD/Sea.js\r\n    {\r\n\t\tif (define.amd) { // for Require.js\r\n\r\n\t\t\tdefine([\"editormd\"], function(editormd) {\r\n                factory(editormd);\r\n            });\r\n\r\n\t\t} else { // for Sea.js\r\n\t\t\tdefine(function(require) {\r\n                var editormd = require(\"./../../editormd\");\r\n                factory(editormd);\r\n            });\r\n\t\t}\r\n\t} \r\n\telse\r\n\t{\r\n        factory(window.editormd);\r\n\t}\r\n\r\n})();\r\n"]}