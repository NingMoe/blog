{"version":3,"sources":["../../../../../../../app/public/js/marked/plugins/table-dialog/table-dialog.js"],"names":["factory","exports","$","jQuery","pluginName","langs","toolbar","table","dialog","title","cellsLabel","alignLabel","rows","cols","aligns","fn","tableDialog","_this","cm","editor","settings","path","classPrefix","dialogName","extend","lang","name","setToolbar","dialogLang","dialogContent","join","find","length","dialogShowMask","dialogLockScreen","show","createDialog","width","height","mask","drag","dialogDraggable","content","lockScreen","maskStyle","opacity","dialogMaskOpacity","backgroundColor","dialogMaskBgColor","buttons","enter","parseInt","val","align","hrLine","alignSign","_default","left","center","right","r","len","row","head","c","len2","push","replaceSelection","hide","hideMask","cancel","faBtns","html","icons","_lang","values","i","checked","btn","append","require","module","define","amd","editormd","window"],"mappings":"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","file":"table-dialog.js","sourcesContent":["/*!\r\n * Table dialog plugin for Editor.md\r\n *\r\n * @file        table-dialog.js\r\n * @author      pandao\r\n * @version     1.2.1\r\n * @updateTime  2015-06-09\r\n * {@link       https://github.com/pandao/editor.md}\r\n * @license     MIT\r\n */\r\n\r\n(function() {\r\n\r\n\tvar factory = function (exports) {\r\n\r\n\t\tvar $            = jQuery;\r\n\t\tvar pluginName   = \"table-dialog\";\r\n\r\n\t\tvar langs = {\r\n\t\t\t\"zh-cn\" : {\r\n\t\t\t\ttoolbar : {\r\n\t\t\t\t\ttable : \"表格\"\r\n\t\t\t\t},\r\n\t\t\t\tdialog : {\r\n\t\t\t\t\ttable : {\r\n\t\t\t\t\t\ttitle      : \"添加表格\",\r\n\t\t\t\t\t\tcellsLabel : \"单元格数\",\r\n\t\t\t\t\t\talignLabel : \"对齐方式\",\r\n\t\t\t\t\t\trows       : \"行数\",\r\n\t\t\t\t\t\tcols       : \"列数\",\r\n\t\t\t\t\t\taligns     : [\"默认\", \"左对齐\", \"居中对齐\", \"右对齐\"]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"zh-tw\" : {\r\n\t\t\t\ttoolbar : {\r\n\t\t\t\t\ttable : \"添加表格\"\r\n\t\t\t\t},\r\n\t\t\t\tdialog : {\r\n\t\t\t\t\ttable : {\r\n\t\t\t\t\t\ttitle      : \"添加表格\",\r\n\t\t\t\t\t\tcellsLabel : \"單元格數\",\r\n\t\t\t\t\t\talignLabel : \"對齊方式\",\r\n\t\t\t\t\t\trows       : \"行數\",\r\n\t\t\t\t\t\tcols       : \"列數\",\r\n\t\t\t\t\t\taligns     : [\"默認\", \"左對齊\", \"居中對齊\", \"右對齊\"]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"en\" : {\r\n\t\t\t\ttoolbar : {\r\n\t\t\t\t\ttable : \"Tables\"\r\n\t\t\t\t},\r\n\t\t\t\tdialog : {\r\n\t\t\t\t\ttable : {\r\n\t\t\t\t\t\ttitle      : \"Tables\",\r\n\t\t\t\t\t\tcellsLabel : \"Cells\",\r\n\t\t\t\t\t\talignLabel : \"Align\",\r\n\t\t\t\t\t\trows       : \"Rows\",\r\n\t\t\t\t\t\tcols       : \"Cols\",\r\n\t\t\t\t\t\taligns     : [\"Default\", \"Left align\", \"Center align\", \"Right align\"]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\texports.fn.tableDialog = function() {\r\n\t\t\tvar _this       = this;\r\n\t\t\tvar cm          = this.cm;\r\n\t\t\tvar editor      = this.editor;\r\n\t\t\tvar settings    = this.settings;\r\n\t\t\tvar path        = settings.path + \"../plugins/\" + pluginName +\"/\";\r\n\t\t\tvar classPrefix = this.classPrefix;\r\n\t\t\tvar dialogName  = classPrefix + pluginName, dialog;\r\n\r\n\t\t\t$.extend(true, this.lang, langs[this.lang.name]);\r\n\t\t\tthis.setToolbar();\r\n\r\n\t\t\tvar lang        = this.lang;\r\n\t\t\tvar dialogLang  = lang.dialog.table;\r\n\t\t\t\r\n\t\t\tvar dialogContent = [\r\n\t\t\t\t\"<div class=\\\"editormd-form\\\" style=\\\"padding: 13px 0;\\\">\",\r\n\t\t\t\t\"<label>\" + dialogLang.cellsLabel + \"</label>\",\r\n\t\t\t\tdialogLang.rows + \" <input type=\\\"number\\\" value=\\\"3\\\" class=\\\"number-input\\\" style=\\\"width:40px;\\\" max=\\\"100\\\" min=\\\"2\\\" data-rows />&nbsp;&nbsp;\",\r\n\t\t\t\tdialogLang.cols + \" <input type=\\\"number\\\" value=\\\"2\\\" class=\\\"number-input\\\" style=\\\"width:40px;\\\" max=\\\"100\\\" min=\\\"1\\\" data-cols /><br/>\",\r\n\t\t\t\t\"<label>\" + dialogLang.alignLabel + \"</label>\",\r\n\t\t\t\t\"<div class=\\\"fa-btns\\\"></div>\",\r\n\t\t\t\t\"</div>\"\r\n\t\t\t].join(\"\\n\");\r\n\r\n\t\t\tif (editor.find(\".\" + dialogName).length > 0) \r\n\t\t\t{\r\n                dialog = editor.find(\".\" + dialogName);\r\n\r\n\t\t\t\tthis.dialogShowMask(dialog);\r\n\t\t\t\tthis.dialogLockScreen();\r\n\t\t\t\tdialog.show();\r\n\t\t\t} \r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdialog = this.createDialog({\r\n\t\t\t\t\tname       : dialogName,\r\n\t\t\t\t\ttitle      : dialogLang.title,\r\n\t\t\t\t\twidth      : 360,\r\n\t\t\t\t\theight     : 226,\r\n\t\t\t\t\tmask       : settings.dialogShowMask,\r\n\t\t\t\t\tdrag       : settings.dialogDraggable,\r\n\t\t\t\t\tcontent    : dialogContent,\r\n\t\t\t\t\tlockScreen : settings.dialogLockScreen,\r\n\t\t\t\t\tmaskStyle  : {\r\n\t\t\t\t\t\topacity         : settings.dialogMaskOpacity,\r\n\t\t\t\t\t\tbackgroundColor : settings.dialogMaskBgColor\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbuttons    : {\r\n                        enter : [lang.buttons.enter, function() {\r\n\t\t\t\t\t\t\tvar rows   = parseInt(this.find(\"[data-rows]\").val());\r\n\t\t\t\t\t\t\tvar cols   = parseInt(this.find(\"[data-cols]\").val());\r\n\t\t\t\t\t\t\tvar align  = this.find(\"[name=\\\"table-align\\\"]:checked\").val();\r\n\t\t\t\t\t\t\tvar table  = \"\";\r\n\t\t\t\t\t\t\tvar hrLine = \"------------\";\r\n\r\n\t\t\t\t\t\t\tvar alignSign = {\r\n\t\t\t\t\t\t\t\t_default : hrLine,\r\n\t\t\t\t\t\t\t\tleft     : \":\" + hrLine,\r\n\t\t\t\t\t\t\t\tcenter   : \":\" + hrLine + \":\",\r\n\t\t\t\t\t\t\t\tright    : hrLine + \":\"\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tif ( rows > 1 && cols > 0) \r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfor (var r = 0, len = rows; r < len; r++) \r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar row = [];\r\n\t\t\t\t\t\t\t\t\tvar head = [];\r\n\r\n\t\t\t\t\t\t\t\t\tfor (var c = 0, len2 = cols; c < len2; c++) \r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tif (r === 1) {\r\n\t\t\t\t\t\t\t\t\t\t\thead.push(alignSign[align]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\trow.push(\" \");\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (r === 1) {\r\n\t\t\t\t\t\t\t\t\t\ttable += \"| \" + head.join(\" | \") + \" |\" + \"\\n\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\ttable += \"| \" + row.join( (cols === 1) ? \"\" : \" | \" ) + \" |\" + \"\\n\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tcm.replaceSelection(table);\r\n\r\n                            this.hide().lockScreen(false).hideMask();\r\n\r\n                            return false;\r\n                        }],\r\n\r\n                        cancel : [lang.buttons.cancel, function() {                                   \r\n                            this.hide().lockScreen(false).hideMask();\r\n\r\n                            return false;\r\n                        }]\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar faBtns = dialog.find(\".fa-btns\");\r\n\r\n\t\t\tif (faBtns.html() === \"\")\r\n\t\t\t{\r\n\t\t\t\tvar icons  = [\"align-justify\", \"align-left\", \"align-center\", \"align-right\"];\r\n\t\t\t\tvar _lang  = dialogLang.aligns;\r\n\t\t\t\tvar values = [\"_default\", \"left\", \"center\", \"right\"];\r\n\r\n\t\t\t\tfor (var i = 0, len = icons.length; i < len; i++) \r\n\t\t\t\t{\r\n\t\t\t\t\tvar checked = (i === 0) ? \" checked=\\\"checked\\\"\" : \"\";\r\n\t\t\t\t\tvar btn = \"<a href=\\\"javascript:;\\\"><label for=\\\"editormd-table-dialog-radio\"+i+\"\\\" title=\\\"\" + _lang[i] + \"\\\">\";\r\n\t\t\t\t\tbtn += \"<input type=\\\"radio\\\" name=\\\"table-align\\\" id=\\\"editormd-table-dialog-radio\"+i+\"\\\" value=\\\"\" + values[i] + \"\\\"\" +checked + \" />&nbsp;\";\r\n\t\t\t\t\tbtn += \"<i class=\\\"fa fa-\" + icons[i] + \"\\\"></i>\";\r\n\t\t\t\t\tbtn += \"</label></a>\";\r\n\r\n\t\t\t\t\tfaBtns.append(btn);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t};\r\n    \r\n\t// CommonJS/Node.js\r\n\tif (typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\")\r\n    { \r\n        module.exports = factory;\r\n    }\r\n\telse if (typeof define === \"function\")  // AMD/CMD/Sea.js\r\n    {\r\n\t\tif (define.amd) { // for Require.js\r\n\r\n\t\t\tdefine([\"editormd\"], function(editormd) {\r\n                factory(editormd);\r\n            });\r\n\r\n\t\t} else { // for Sea.js\r\n\t\t\tdefine(function(require) {\r\n                var editormd = require(\"./../../editormd\");\r\n                factory(editormd);\r\n            });\r\n\t\t}\r\n\t} \r\n\telse\r\n\t{\r\n        factory(window.editormd);\r\n\t}\r\n\r\n})();\r\n"]}