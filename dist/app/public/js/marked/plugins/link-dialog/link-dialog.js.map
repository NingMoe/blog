{"version":3,"sources":["../../../../../../../app/public/js/marked/plugins/link-dialog/link-dialog.js"],"names":["factory","exports","pluginName","fn","linkDialog","_this","cm","editor","settings","selection","getSelection","lang","linkLang","dialog","link","classPrefix","dialogName","focus","find","length","val","dialogShowMask","dialogLockScreen","show","dialogHTML","url","urlTitle","createDialog","title","width","height","content","mask","drag","dialogDraggable","lockScreen","maskStyle","opacity","dialogMaskOpacity","backgroundColor","dialogMaskBgColor","buttons","enter","alert","urlEmpty","str","replaceSelection","hide","hideMask","cancel","require","module","define","amd","editormd","window"],"mappings":"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","file":"link-dialog.js","sourcesContent":["/*!\r\n * Link dialog plugin for Editor.md\r\n *\r\n * @file        link-dialog.js\r\n * @author      pandao\r\n * @version     1.2.1\r\n * @updateTime  2015-06-09\r\n * {@link       https://github.com/pandao/editor.md}\r\n * @license     MIT\r\n */\r\n\r\n(function() {\r\n\r\n    var factory = function (exports) {\r\n\r\n\t\tvar pluginName   = \"link-dialog\";\r\n\r\n\t\texports.fn.linkDialog = function() {\r\n\r\n\t\t\tvar _this       = this;\r\n\t\t\tvar cm          = this.cm;\r\n            var editor      = this.editor;\r\n            var settings    = this.settings;\r\n            var selection   = cm.getSelection();\r\n            var lang        = this.lang;\r\n            var linkLang    = lang.dialog.link;\r\n            var classPrefix = this.classPrefix;\r\n\t\t\tvar dialogName  = classPrefix + pluginName, dialog;\r\n\r\n\t\t\tcm.focus();\r\n\r\n            if (editor.find(\".\" + dialogName).length > 0)\r\n            {\r\n                dialog = editor.find(\".\" + dialogName);\r\n                dialog.find(\"[data-url]\").val(\"http://\");\r\n                dialog.find(\"[data-title]\").val(selection);\r\n\r\n                this.dialogShowMask(dialog);\r\n                this.dialogLockScreen();\r\n                dialog.show();\r\n            }\r\n            else\r\n            {\r\n                var dialogHTML = \"<div class=\\\"\" + classPrefix + \"form\\\">\" + \r\n                                        \"<label>\" + linkLang.url + \"</label>\" + \r\n                                        \"<input type=\\\"text\\\" value=\\\"http://\\\" data-url />\" +\r\n                                        \"<br/>\" + \r\n                                        \"<label>\" + linkLang.urlTitle + \"</label>\" + \r\n                                        \"<input type=\\\"text\\\" value=\\\"\" + selection + \"\\\" data-title />\" + \r\n                                        \"<br/>\" +\r\n                                    \"</div>\";\r\n\r\n                dialog = this.createDialog({\r\n                    title      : linkLang.title,\r\n                    width      : 380,\r\n                    height     : 211,\r\n                    content    : dialogHTML,\r\n                    mask       : settings.dialogShowMask,\r\n                    drag       : settings.dialogDraggable,\r\n                    lockScreen : settings.dialogLockScreen,\r\n                    maskStyle  : {\r\n                        opacity         : settings.dialogMaskOpacity,\r\n                        backgroundColor : settings.dialogMaskBgColor\r\n                    },\r\n                    buttons    : {\r\n                        enter  : [lang.buttons.enter, function() {\r\n                            var url   = this.find(\"[data-url]\").val();\r\n                            var title = this.find(\"[data-title]\").val();\r\n\r\n                            if (url === \"http://\" || url === \"\")\r\n                            {\r\n                                alert(linkLang.urlEmpty);\r\n                                return false;\r\n                            }\r\n\r\n                            /*if (title === \"\")\r\n                            {\r\n                                alert(linkLang.titleEmpty);\r\n                                return false;\r\n                            }*/\r\n                            \r\n                            var str = \"[\" + title + \"](\" + url + \" \\\"\" + title + \"\\\")\";\r\n                            \r\n                            if (title == \"\")\r\n                            {\r\n                                str = \"[\" + url + \"](\" + url + \")\";\r\n                            }                                \r\n\r\n                            cm.replaceSelection(str);\r\n\r\n                            this.hide().lockScreen(false).hideMask();\r\n\r\n                            return false;\r\n                        }],\r\n\r\n                        cancel : [lang.buttons.cancel, function() {                                   \r\n                            this.hide().lockScreen(false).hideMask();\r\n\r\n                            return false;\r\n                        }]\r\n                    }\r\n                });\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t};\r\n    \r\n\t// CommonJS/Node.js\r\n\tif (typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\")\r\n    { \r\n        module.exports = factory;\r\n    }\r\n\telse if (typeof define === \"function\")  // AMD/CMD/Sea.js\r\n    {\r\n\t\tif (define.amd) { // for Require.js\r\n\r\n\t\t\tdefine([\"editormd\"], function(editormd) {\r\n                factory(editormd);\r\n            });\r\n\r\n\t\t} else { // for Sea.js\r\n\t\t\tdefine(function(require) {\r\n                var editormd = require(\"./../../editormd\");\r\n                factory(editormd);\r\n            });\r\n\t\t}\r\n\t} \r\n\telse\r\n\t{\r\n        factory(window.editormd);\r\n\t}\r\n\r\n})();\r\n"]}