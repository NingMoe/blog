{"version":3,"sources":["../../../../app/public/js/mail_setting.js"],"names":["VM","Vue","delimiters","el","data","isCollapse","mailUsers","dialogTableVisible","dialogFormVisible","dialogAddGroupVisible","multipleSelection","mailUserForm","name","email","phone","group","mark","mailUserTotal","mailGroupForm","_id","mailGroupSelect","formLabelWidth","methods","init","get_mail_group","get_mail_users","mailUserSelectionChange","options","handleOpen","key","keyPath","console","log","handleClose","$http","get","then","res","body","code","ok","count","mail_user","list","forEach","item","currentChange","current","add_mail_user_form_but","alertError","post","push","alertSuccess","showAddGroupDialog","add_mail_group_form_but","select_mail_group","id","moveToGroup","length","deleteMailUserbut","alertInfo","msg","$message","message","type","alertWarning","error"],"mappings":"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","file":"mail_setting.js","sourcesContent":["const VM = new Vue({\n    delimiters: ['${', '}'],\n    el:'#app-mail-setting',\n    data:{\n        isCollapse: false,\n        mailUsers: [],\n        dialogTableVisible: false,\n        dialogFormVisible: false,\n        dialogAddGroupVisible:false,\n        multipleSelection:[],\n        mailUserForm: {\n            name: '',\n            email: '',\n            phone: '',\n            group: '',\n            mark: ''\n        },\n        mailUserTotal:0,\n        mailGroupForm:{\n            _id:'',\n            name:''\n        },\n        mailGroupSelect:[],\n        formLabelWidth: '120px'\n    },\n    methods:{\n        init:function(){\n            this.get_mail_group();\n            this.get_mail_users();\n        },\n        mailUserSelectionChange(options) {\n            this.multipleSelection = options;\n        },\n        handleOpen(key, keyPath) {\n            console.log(key, keyPath);\n        },\n        handleClose(key, keyPath) {\n            console.log(key, keyPath);\n        },\n        get_mail_users:function(){\n            this.$http.get('/api/mail/user/list?offset=1&num=20').then(res=>{\n                if(res.body.code && res.body.ok){\n                    this.mailUserTotal = res.body.data.count;\n                    let mail_user = res.body.data.list;\n                    mail_user.forEach(item=>{\n                        item.group = item.group.name;\n                    });\n                    this.mailUsers = mail_user;\n                }\n            });\n        },\n        currentChange:function(current){\n            this.$http.get('/api/mail/user/list?offset='+current+'&num=20').then(res=>{\n                if(res.body.code && res.body.ok){\n                    this.mailUserTotal = res.body.data.count;\n                    let mail_user = res.body.data.list;\n                    mail_user.forEach(item=>{\n                        item.group = item.group.name;\n                    });\n                    this.mailUsers = mail_user;\n                }\n            });\n        },\n        add_mail_user_form_but:function(){\n            if(!this.mailUserForm.name){\n                this.alertError('用户名必填');\n                return false;\n            }\n            if(!this.mailUserForm.email){\n                this.alertError('邮箱地址必填');\n                return false;\n            }\n            if(!this.mailUserForm.phone){\n                this.alertError('用户手机号必填');\n                return false;\n            }\n            this.mailUserForm.group = this.mailGroupSelect._id;\n            this.$http.post('/api/mail/user/add',{mail_user:this.mailUserForm}).then(res=>{\n                console.log(res);\n                if(res.body.code && res.body.ok){\n                    let data = res.body.data;\n                    data.group = data.group.name;\n                    this.mailUsers.push(data);\n                    this.alertSuccess('用户添加成功');\n                }\n            });\n            console.log(this.mailUserForm);\n        },\n        showAddGroupDialog:function(){\n            this.dialogAddGroupVisible = true;\n        },\n        get_mail_group:function(){\n            this.$http.get('/api/mail/group/list').then(res=>{\n                if(res.body.code && res.body.ok){\n                    this.mailGroupSelect = res.body.data[0];\n                    this.mailGroupForm = res.body.data;\n                }\n            });\n        },\n        add_mail_group_form_but:function(){\n            this.$http.post('/api/mail/group/add',{name:this.mailGroupForm.name}).then(res=>{\n                if(res.body.code && res.body.ok){\n                    this.mailGroupForm.push(res.body.data);\n                    this.dialogAddGroupVisible = false;\n                }\n            });\n        },\n        select_mail_group:function(id){\n            this.$http.get('/api/mail/group/get?id='+id).then(res=>{\n                if(res.body.code && res.body.ok){\n                    this.mailGroupSelect = res.body.data;\n                }\n            });\n        },\n        moveToGroup:function(id){\n            if(this.multipleSelection.length){\n                this.multipleSelection.forEach(item=>{\n                    this.$http.get('/api/mail/move_user_to_group?user_id='+item._id+'&id='+id).then(res=>{\n                        if(res.body.code && res.body.ok){\n                            this.alertSuccess('移动成功');\n                        }else{\n                            this.alertSuccess('移动失败')\n                        }\n                        this.get_mail_users();\n                    });\n                });\n            }else{\n                this.alertError('请选择要移动到组的用户');\n            }\n        },\n        deleteMailUserbut:function(){\n            if(this.multipleSelection.length){\n                this.multipleSelection.forEach(item=>{\n                    this.$http.get('/api/mail/user/delete?user_id='+item._id).then(res=>{\n                        if(res.body.code && res.body.ok){\n                            this.alertSuccess('删除成功');\n                        }else{\n                            this.alertSuccess('删除失败')\n                        }\n                        this.get_mail_users();\n                    });\n                });\n            }else{\n                this.alertError('请选择要删除的用户');\n            }\n        },\n        alertInfo(msg) {\n            this.$message(msg);\n        },\n        alertSuccess(msg) {\n            this.$message({\n                message: msg,\n                type: 'success'\n            });\n        },\n\n        alertWarning(msg) {\n            this.$message({\n                message: msg,\n                type: 'warning'\n            });\n        },\n\n        alertError(msg) {\n            this.$message.error(msg);\n        }\n    }\n});\nVM.init();"]}